(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[37],{1675:function(e,t,a){"use strict";var n=a(15),i=a(16),l=a(18),c=a(17),s=a(0),o=a.n(s),r=a(1485),d=a(1488),u=a(61),m=a(1540),h=a(117),p=a(1623),f=a.n(p),v=(a(11),a(30),function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={open:!1,instance:null,title:"",content:""},i}return Object(i.a)(a,[{key:"openDialog",value:function(){this.setState({open:!0})}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement(r.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},o.a.createElement(d.a,{className:"p-10 downloadPaper"},o.a.createElement(u.a,null,o.a.createElement(f.a,{className:"closeBtn",onClick:function(){return e.onCloseDialog(!1)}})),o.a.createElement("div",{id:"downloadArea"},this.props.selectedDocumentList.map((function(e,t){return o.a.createElement(u.a,{key:t,className:"pageContainer"},o.a.createElement(u.a,{bgcolor:"background.paper",className:"title-banner"},o.a.createElement(m.a,null,o.a.createElement(u.a,{className:"title-content",textAlign:"center"},o.a.createElement(h.a,{variant:"h4"},e.instanceName)))),o.a.createElement(u.a,{className:"p-10"},o.a.createElement(h.a,{variant:"h4",className:"title"},e.title)),o.a.createElement(u.a,{className:"p-10 contentHtml"},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})),o.a.createElement(u.a,{bgcolor:"background.paper",className:"title-banner"},o.a.createElement(m.a,null,o.a.createElement(u.a,{className:"title-content",textAlign:"center"},o.a.createElement(u.a,{pt:1,fontSize:"body2.fontSize"},"instance Name : ",e.instanceName),o.a.createElement(u.a,{pt:1,fontSize:"body2.fontSize"},"Contact Email : ",e.email)))))})))))}}]),a}(o.a.Component));t.a=v},2247:function(e,t,a){"use strict";a.r(t);var n=a(7),i=a(194),l=a(15),c=a(16),s=a(429),o=a(18),r=a(17),d=a(0),u=a.n(d),m=a(1540),h=a(61),p=a(1677),f=a.n(p),v=a(1678),g=a.n(v),E=a(11),b=a(30),D=a(237),S=a(1485),y=a(1489),k=a(1488),C=a(406),N=a(405),O=a(763),j=a(787),L=a(524),w=a(1513),x=a(786),_=a(1512),A=a(1487),z=a(228),I=(a(1636),a(19)),P=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={open:!1,data:{},selectedService:"",selectedDocuments:[],title:"",servicesList:[],documentsList:[],instance_id:0,isEdit:!1},n.onchangeDocument=function(e){n.setState({selectedDocuments:Object(i.a)(e.target.value)})},n.onChangeServices=function(e){n.setState({selectedService:e.target.value})},n.onChangeTitle=function(e){n.setState({title:e.target.value})},n}return Object(c.a)(a,[{key:"openDialog",value:function(){this.setState({open:!0})}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1})}},{key:"onSubmit",value:function(){this.state.title&&this.state.selectedDocuments.length&&this.state.selectedService?(this.setState({open:!1}),this.props.onConfirm({title:this.state.title,documents:JSON.stringify(this.state.selectedDocuments),service:this.state.selectedService,instance_id:this.state.instance_id})):alert("Bitte geben Sie die erforderlichen Felder ein")}},{key:"onUpdate",value:function(){this.state.title&&this.state.selectedDocuments.length&&this.state.selectedService?(this.setState({open:!1}),this.props.onUpdate({id:this.state.id,title:this.state.title,documents:JSON.stringify(this.state.selectedDocuments),service:this.state.selectedService,instance_id:this.state.instance_id})):alert("Bitte geben Sie die erforderlichen Felder ein")}},{key:"render",value:function(){var e=this;return u.a.createElement(S.a,{className:"contact-dialog carefolderContainer",open:this.state.open,onClose:this.closeDialog,"aria-labelledby":"form-dialog-title"},u.a.createElement(y.a,{id:"form-dialog-title"},"Edit Contact"),u.a.createElement(k.a,null,u.a.createElement("div",null,u.a.createElement("form",{autoComplete:"off"},u.a.createElement("div",{style:{marginBottom:"20px"}},u.a.createElement(h.a,{className:"p-10"},u.a.createElement(C.a,{className:"full-width",type:"text",label:"Please input Care folder title",InputLabelProps:{shrink:!0},value:this.state.title,onChange:this.onChangeTitle.bind(this),defaultValue:"Title..."})),u.a.createElement(h.a,{className:"p-10"},this.state.servicesList.length?u.a.createElement(N.a,{className:"selection-wrap full-width"},u.a.createElement(O.a,{id:"page-size"},"Please Select a Service"),u.a.createElement(j.a,{labelId:"page-size",id:"page-size",value:this.state.selectedService,onChange:this.onChangeServices.bind(this),defaultValue:1},this.state.servicesList.map((function(e){return u.a.createElement("option",{key:e.services,value:e.services},e.services)})))):u.a.createElement("div",null,u.a.createElement(I.b,{to:"/app/services"},"Add New Services"))),u.a.createElement(h.a,{className:"p-10"},this.state.documentsList.length?u.a.createElement(N.a,{className:"full-width"},u.a.createElement(O.a,{id:"demo-mutiple-checkbox-label"},"Please select documents"),u.a.createElement(j.a,{labelId:"demo-mutiple-checkbox-label",id:"demo-mutiple-checkbox",multiple:!0,value:this.state.selectedDocuments,onChange:this.onchangeDocument.bind(this),input:u.a.createElement(L.a,null),renderValue:function(e){return e.join(", ")}},this.state.documentsList.map((function(t){return u.a.createElement(w.a,{key:t.id,value:t.id},u.a.createElement(x.a,{checked:e.state.selectedDocuments.indexOf(t.id)>-1}),u.a.createElement(_.a,{primary:t.title}))})))):u.a.createElement("div",null,u.a.createElement(I.b,{to:"/app/documents/*"},"Add New documents"))))))),u.a.createElement(A.a,{className:"px-20 pb-20 justify-content-center"},u.a.createElement(h.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",p:1,textAlign:"center"},!this.state.isEdit&&u.a.createElement(h.a,{mx:2},u.a.createElement(z.a,{variant:"contained",color:"primary",onClick:function(){return e.onSubmit(!0)}},"Submit")),this.state.isEdit&&u.a.createElement(h.a,{mx:2},u.a.createElement(z.a,{variant:"contained",color:"primary",onClick:function(){return e.onUpdate(!0)}},"Update")),u.a.createElement(z.a,{variant:"contained",color:"secondary",onClick:function(){return e.onCloseDialog(!1)}},"No"))))}}]),a}(u.a.Component),F=a(117),J=a(1623),B=a.n(J),T=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={open:!1,instance:null,title:"",content:""},n}return Object(c.a)(a,[{key:"openDialog",value:function(){this.setState({open:!0})}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1})}},{key:"render",value:function(){var e=this;return u.a.createElement(S.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},u.a.createElement(k.a,{className:"p-10"},u.a.createElement(h.a,null,u.a.createElement(B.a,{className:"closeBtn",onClick:function(){return e.onCloseDialog(!1)}})),u.a.createElement(h.a,{bgcolor:"background.paper",className:"title-banner"},u.a.createElement(m.a,null,u.a.createElement(h.a,{className:"title-content",textAlign:"center"},u.a.createElement(F.a,{variant:"h4"},this.props.document.instanceName),u.a.createElement(h.a,{pt:1,fontSize:"body2.fontSize"},u.a.createElement("img",{src:this.props.document.instanceLogo}))))),u.a.createElement(h.a,{className:"p-10"},u.a.createElement(F.a,{variant:"h4",className:"title"},this.props.document.title)),u.a.createElement(h.a,{className:"p-10"},u.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.document.content}})),u.a.createElement(h.a,{textAlign:"center",pt:2}),u.a.createElement(h.a,{bgcolor:"background.paper",className:"title-banner"},u.a.createElement(m.a,null,u.a.createElement(h.a,{className:"title-content",textAlign:"center"},u.a.createElement(h.a,{pt:1,fontSize:"body2.fontSize"},"instance Name : ",this.props.document.instanceName),u.a.createElement(h.a,{pt:1,fontSize:"body2.fontSize"},"Contact Email : ",this.props.document.email))))))}}]),a}(u.a.Component),U=a(1675),V=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={open:!1},e}return Object(c.a)(a,[{key:"openDialog",value:function(){this.setState({open:!0})}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1}),this.props.onConfirm(e)}},{key:"render",value:function(){var e=this;return u.a.createElement(S.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},u.a.createElement(k.a,null,u.a.createElement(h.a,{textAlign:"center",pt:2},u.a.createElement(F.a,{variant:"h5"},"Are you sure you want to delete this document permanently?"))),u.a.createElement(A.a,{className:"px-20 pb-20 justify-content-center"},u.a.createElement(h.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",p:1,textAlign:"center"},u.a.createElement(h.a,{mx:2},u.a.createElement(z.a,{variant:"contained",color:"primary",onClick:function(){return e.onCloseDialog(!0)}},"Yes")),u.a.createElement(z.a,{variant:"contained",color:"secondary",onClick:function(){return e.onCloseDialog(!1)}},"No"))))}}]),a}(u.a.Component),H=a(1757),M=a.n(H),R=a(1976),W=a.n(R),G=a(1755),Y=a(1756),q=a.n(Y),K=(a(1676),a(1577)),Q=a.n(K),X=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onCloseDialog=function(e){n.setState({oldData:null})},n.getLength=function(e){var t=0;e&&(t=JSON.parse(e).length);return t},n.state={servicesList:[],folders:[],selectedDocument:{},oldData:{},documentsList:[],selectedDocumentList:[],columns:[{title:"Folders",field:"action",render:function(e){return u.a.createElement("div",null,u.a.createElement(I.b,{className:"pointerIcon",to:"/app/documents/".concat(e.documents)},u.a.createElement(M.a,null)))}},{title:"Title",field:"title"},{title:"Size",field:"size",render:function(e){return u.a.createElement("div",null,n.getLength(e.documents))}},{title:"Created_At",field:"created_at"},{title:"Actions",field:"actions",render:function(e){return u.a.createElement("div",null,u.a.createElement(W.a,{onClick:function(){return n.previewDocument(e.documents)}}),u.a.createElement(f.a,{className:"pointerIcon",onClick:function(){return n.editDocument(e)}}),u.a.createElement(g.a,{className:"pointerIcon",onClick:function(){return n.ondeleteContact(e)}}))}}]},n.editorDialog=u.a.createRef(),n.viewDialog=u.a.createRef(),n.preViewDialog=u.a.createRef(),n.deleteDialog=u.a.createRef(),n.addFolder=n.addFolder.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"addFolder",value:function(){this.editorDialog.current.setState({servicesList:this.state.servicesList,documentsList:this.state.documentsList,instance_id:this.instance_id}),this.editorDialog.current.openDialog()}},{key:"previewDocument",value:function(e){var t=this,a=[];if(e){var n=JSON.parse(e);a=this.state.documentsList.filter((function(e){return n.indexOf(e.id)>-1}))}this.setState({selectedDocumentList:Object(i.a)(a)}),this.preViewDialog.current.openDialog(),setTimeout((function(){t.generatePdf(a.length)}),2e3)}},{key:"generatePdf",value:function(e){var t,a,n,i,l,c;t=document.getElementById("downloadArea").clientWidth,a=document.getElementById("downloadArea").clientHeight,i=1.5*(n=t+30)+30,l=t,c=a;var s=Math.ceil(a/i)-1,o=document.getElementById("downloadArea");q.a.toPng(o).then((function(e){var t=new G.a("p","pt",[n,i]);t.addImage(e,"JPG",15,15,l,c),console.log("totalPDFPages",n,i);for(var a=1;a<=s;a++)t.addPage(),t.addImage(e,"JPG",15,-i*a+60,l,c);t.save("HTML-Document.pdf")}))}},{key:"editDocument",value:function(e){var t=[];e.documents&&(t=JSON.parse(e.documents)),this.editorDialog.current.setState({servicesList:this.state.servicesList,documentsList:this.state.documentsList,instance_id:this.instance_id}),this.editorDialog.current.setState({id:e.id,instance_id:e.instance_id,title:e.title,selectedDocuments:Object(i.a)(t),selectedService:e.service,isEdit:!0}),this.setState({oldData:e}),this.editorDialog.current.openDialog()}},{key:"onSubmit",value:function(e){var t=this;e&&D.a.addFolders(e).then((function(e){t.setState((function(t){var a=Object(i.a)(t.folders);return a.push(e),Object(n.a)(Object(n.a)({},t),{},{folders:a})}))}))}},{key:"onUpdate",value:function(e){var t=this;e&&D.a.editFolders(e).then((function(a){t.setState((function(a){var l=Object(i.a)(a.folders);e.created_at=t.state.oldData.created_at,l[l.indexOf(t.state.oldData)]=e;return Object(n.a)(Object(n.a)({},a),{},{folders:l,oldData:{}})}))}))}},{key:"ondeleteContact",value:function(e){console.log(";",e),this.setState({oldData:e}),this.deleteDialog.current.openDialog()}},{key:"deleteContactPermanent",value:function(e){var t=this;e&&D.a.deleteFolders({id:this.state.oldData.id}).then((function(e){e&&t.setState((function(e){var a=Object(i.a)(e.folders);return a.splice(a.indexOf(t.state.oldData),1),Object(n.a)(Object(n.a)({},e),{},{folders:a})}))}))}},{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,console.log("instance",this.instance_id),D.a.showFolders({instance_id:this.instance_id,pagination:1}).then((function(t){console.log("servicesList",t),e.setState({folders:t.folders,servicesList:t.services,documentsList:t.documents})}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"tables-wrapper"},u.a.createElement(E.f,{title:u.a.createElement(b.a,{id:"sidebar.carefolders"}),center:!0}),u.a.createElement(m.a,{maxWidth:"lg"},u.a.createElement(h.a,{px:{xs:"12px",lg:0},className:"page-space"},u.a.createElement(Q.a,{title:u.a.createElement(b.a,{id:"sidebar.carefolders"}),columns:this.state.columns,data:this.state.folders,actions:[{icon:"create_new_folder_outlinedIcon",tooltip:"create",position:"toolbar",onClick:function(){e.addFolder()}}]}))),u.a.createElement(P,{ref:this.editorDialog,onConfirm:function(t){return e.onSubmit(t)},onUpdate:function(t){return e.onUpdate(t)}}),u.a.createElement(T,{ref:this.viewDialog,document:this.state.selectedDocument}),u.a.createElement(U.a,{ref:this.preViewDialog,selectedDocumentList:this.state.selectedDocumentList}),u.a.createElement(V,{ref:this.deleteDialog,onConfirm:function(t){return e.deleteContactPermanent(t)}}))}}]),a}(d.Component);t.default=X}}]);
//# sourceMappingURL=37.ec0ebe03.chunk.js.map