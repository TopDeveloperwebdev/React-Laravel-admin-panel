{"version":3,"sources":["routes/Tables/Instances/index.js"],"names":["rolesList","Instances","props","state","columns","title","field","editComponent","rowData","id","lookup","render","size","color","checked","status","console","log","isEdit","setState","onChange","e","target","data","user","JSON","parse","localStorage","getItem","this","instance_id","userService","showInstances","pagination","then","res","roles","map","ele","role","prevState","instances","className","center","maxWidth","px","xs","lg","editable","onRowAdd","newData","Promise","resolve","setTimeout","addInstances","push","onRowUpdate","oldData","editInstances","indexOf","onRowDelete","deleteInstances","splice","Component"],"mappings":"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","file":"static/js/50.e6f393ad.chunk.js","sourcesContent":["/**\r\n * Search Table\r\n*/\r\nimport React, { Component } from 'react';\r\nimport MaterialTable from 'material-table';\r\nimport { Container, Box, Switch } from '@material-ui/core';\r\nimport { userService } from '../../../_services';\r\n//Components\r\nimport { SmallTitleBar } from 'components/GlobalComponents';\r\nimport IntlMessages from 'util/IntlMessages';\r\nlet rolesList = {};\r\nclass Instances extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'ID', field: 'id', editComponent: rowData => <div>\r\n\t\t\t\t\t\t{rowData.id}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t},\r\n\t\t\t\t{ title: 'Instance Name', field: 'instanceName' },\r\n\t\t\t\t{ title: 'Admin Name', field: 'name' },\r\n\t\t\t\t{ title: 'Email', field: 'email' },\r\n\t\t\t\t{ title: 'Password', field: 'password' },\r\n\t\t\t\t{ title: 'Role', field: 'role', lookup: rolesList },\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'Status', field: 'status', render: rowData => {\r\n\t\t\t\t\t\treturn (<Switch\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tchecked={rowData.status ? true : false}\r\n\t\t\t\t\t\t/>)\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\teditComponent: rowData => {\r\n\t\t\t\t\t\tconsole.log('rowData', rowData);\r\n\t\t\t\t\t\tif (this.state.isEdit && rowData.rowData.id) {\r\n\t\t\t\t\t\t\tthis.setState({ status: rowData.rowData.status ? true : false, isEdit: false });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn (<Switch\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tchecked={this.state.status}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ status: e.target.checked })}\r\n\t\t\t\t\t\t/>)\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tdata: [],\r\n\t\t\tstatus: true,\r\n\t\t\tisEdit: true\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet user = JSON.parse(localStorage.getItem('user'));\r\n\t\tthis.instance_id = user.instance_id;\r\n\t\tconsole.log('res', this.instance_id);\r\n\t\tuserService.showInstances({ instance_id: this.instance_id, pagination: 1 }).then(res => {\r\n\t\t\tres.roles.map(ele => {\r\n\t\t\t\trolesList[ele.role] = ele.role;\r\n\t\t\t})\r\n\t\t\tthis.setState(prevState => {\r\n\t\t\t\tconst data = res.instances\r\n\t\t\t\treturn { ...prevState, data };\r\n\t\t\t});\r\n\r\n\t\t})\r\n\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"tables-wrapper search-table-wrap\">\r\n\t\t\t\t<SmallTitleBar\r\n\t\t\t\t\ttitle={<IntlMessages id=\"sidebar.Instance\" />}\r\n\t\t\t\t\tcenter\r\n\t\t\t\t/>\r\n\t\t\t\t<Container maxWidth=\"lg\">\r\n\t\t\t\t\t<Box px={{ xs: '12px', lg: 0 }} className=\"page-space\">\r\n\t\t\t\t\t\t<MaterialTable\r\n\t\t\t\t\t\t\ttitle={<IntlMessages id=\"sidebar.Instance\" />}\r\n\t\t\t\t\t\t\tcolumns={this.state.columns}\r\n\t\t\t\t\t\t\tdata={this.state.data}\r\n\t\t\t\t\t\t\teditable={{\r\n\t\t\t\t\t\t\t\tonRowAdd: newData =>\r\n\t\t\t\t\t\t\t\t\tnew Promise(resolve => {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('newData', newData);\r\n\t\t\t\t\t\t\t\t\t\t\tnewData.instance_id = this.instance_id;\r\n\t\t\t\t\t\t\t\t\t\t\tnewData.status = this.state.status ? 1 : 0;\r\n\t\t\t\t\t\t\t\t\t\t\tuserService.addInstances(newData).then(res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('res', res);\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState(prevState => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst data = [...prevState.data];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata.push(res);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst status = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn { ...prevState, data, status };\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t}, 600);\r\n\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tonRowUpdate: (newData, oldData) =>\r\n\t\t\t\t\t\t\t\t\tnew Promise(resolve => {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('newdata', newData.id);\r\n\t\t\t\t\t\t\t\t\t\t\tnewData.status = this.state.status ? 1 : 0;\r\n\t\t\t\t\t\t\t\t\t\t\tuserService.editInstances(newData).then(res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (oldData) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState(prevState => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst data = [...prevState.data];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata[data.indexOf(oldData)] = newData;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst status = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst isEdit = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn { ...prevState, data, status, isEdit };\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}, 600);\r\n\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tonRowDelete: oldData =>\r\n\t\t\t\t\t\t\t\t\tnew Promise(resolve => {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(';oldData', oldData.id);\r\n\t\t\t\t\t\t\t\t\t\t\tuserService.deleteInstances({ id: oldData.id }).then(res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('res', res);\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState(prevState => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst data = [...prevState.data];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata.splice(data.indexOf(oldData), 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn { ...prevState, data };\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}, 600);\r\n\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Container>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nexport default Instances;\r\n\r\n\r\n"],"sourceRoot":""}