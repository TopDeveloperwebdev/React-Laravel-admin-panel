(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[58],{2030:function(e,t,s){"use strict";s.r(t);var n=s(7),i=s(413),a=s(14),o=s(15),r=s(17),c=s(16),l=s(0),d=s.n(l),u=s(1577),m=s.n(u),f=s(1537),p=s(61),h=s(236),b=s(18),O=s(30),g=s(1733),v=function(e){Object(r.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(a.a)(this,s),(n=t.call(this,e)).onChange=function(e){n.setState({selectedPermissions:Object(i.a)(e.target.value)})},n.state={columns:[{title:"ID",field:"id",editComponent:function(e){return d.a.createElement("div",null,e.id)}},{title:"Role",field:"role"},{title:"Permissions",field:"permissions",render:function(e){var t=JSON.parse(e.permissions);return d.a.createElement(g.a,{data:n.state.permissionsList,value:t})},editComponent:function(e){if(e.rowData.id){console.log("rowData",e);var t=JSON.parse(e.rowData.permissions);t||(t=[]),n.state.isEditPermissions&&n.setState({selectedPermissions:t,isEditPermissions:!1})}return d.a.createElement(g.a,{data:n.state.permissionsList,onChange:n.onChange,value:n.state.selectedPermissions})}}],data:[],selectedPermissions:[],permissionsList:[],isEditPermissions:!0},n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,console.log("res",this.instance_id),h.a.showRoles({instance_id:this.instance_id,pagination:1}).then((function(t){var s=t.permissions.map((function(e){return e.permissions}));e.setState({permissionsList:s}),e.setState((function(e){var s=t.roles;return Object(n.a)(Object(n.a)({},e),{},{data:s})}))}))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"tables-wrapper search-table-wrap"},d.a.createElement(b.f,{title:d.a.createElement(O.a,{id:"sidebar.roles"}),center:!0}),d.a.createElement(f.a,{maxWidth:"lg"},d.a.createElement(p.a,{px:{xs:"12px",lg:0},className:"page-space"},d.a.createElement(m.a,{title:d.a.createElement(O.a,{id:"sidebar.roles"}),columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(s){s(),console.log("newData",t),t.instance_id=e.instance_id,t.permissions=JSON.stringify(e.state.selectedPermissions),h.a.addRoles(t).then((function(t){console.log("res",t),e.setState((function(e){var s=Object(i.a)(e.data);s.push(t);return Object(n.a)(Object(n.a)({},e),{},{data:s,selectedPermissions:[],isEditPermissions:!0})}))}))}))},onRowUpdate:function(t,s){return new Promise((function(a){setTimeout((function(){a(),console.log("newdata",t.id),t.permissions=JSON.stringify(e.state.selectedPermissions),h.a.editRoles(t).then((function(a){s&&e.setState((function(e){var a=Object(i.a)(e.data);a[a.indexOf(s)]=t;return Object(n.a)(Object(n.a)({},e),{},{data:a,selectedPermissions:[],isEditPermissions:!0})}))}))}),600)}))},onRowDelete:function(t){return new Promise((function(s){setTimeout((function(){s(),console.log(";oldData",t.id),h.a.deleteRoles({id:t.id}).then((function(s){console.log("res",s),e.setState((function(e){var s=Object(i.a)(e.data);return s.splice(s.indexOf(t),1),Object(n.a)(Object(n.a)({},e),{},{data:s})}))}))}),600)}))}}}))))}}]),s}(l.Component);t.default=v}}]);
//# sourceMappingURL=58.ac9324ad.chunk.js.map