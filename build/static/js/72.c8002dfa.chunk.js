(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[72],{2388:function(e,t,a){"use strict";a.r(t);var n=a(194),i=a(7),r=a(15),s=a(16),o=a(18),l=a(17),c=a(0),u=a.n(c),d=a(1586),f=a.n(d),m=a(1568),p=a(1550),h=a(61),v=a(237),g=a(11),w=a(30),b={},E={},O=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={columns:[{title:"ID",field:"id",editComponent:function(e){return u.a.createElement("div",null,e.id)}},{title:"Benutzer Bild",field:"userAvatar",render:function(e){return u.a.createElement("img",{src:e.userAvatar?e.userAvatar:n.defaultUrl,className:"logo-td bdr-rad-50"})},editComponent:function(e){return u.a.createElement("input",{type:"file",onChange:function(t){return e.onChange(t.target.files[0])}})}},{title:"Instance",field:"instance_id",lookup:E},{title:"Benutzer Name",field:"name"},{title:"E-Mail",field:"email"},{title:"Passwort",field:"password"},{title:"Benutzerrolle",field:"role",lookup:b},{title:"Status",field:"status",render:function(e){return u.a.createElement(m.a,{size:"small",color:"primary",checked:!!e.status})},editComponent:function(e){return console.log("rowData",e),n.state.isEdit&&e.rowData.id&&n.setState({status:!!e.rowData.status,isEdit:!1}),u.a.createElement(m.a,{size:"small",color:"primary",checked:n.state.status,onChange:function(e){return n.setState({status:e.target.checked})}})}}],data:[],status:!0,isEdit:!0,instance_id:0},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));if(this.instance_id=t.instance_id,this.instance_id){var a=[{title:"ID",field:"id",editComponent:function(e){return u.a.createElement("div",null,e.id)}},{title:"User Avatar",field:"userAvatar",render:function(t){return u.a.createElement("img",{src:t.userAvatar?t.userAvatar:e.defaultUrl,className:"logo-td bdr-rad-50"})},editComponent:function(e){return u.a.createElement("input",{type:"file",onChange:function(t){return e.onChange(t.target.files[0])}})}},{title:"User Name",field:"name"},{title:"Email",field:"email"},{title:"Password",field:"password"},{title:"Role",field:"role",lookup:b},{title:"Status",field:"status",render:function(e){return u.a.createElement(m.a,{size:"small",color:"primary",checked:!!e.status})},editComponent:function(t){return console.log("rowData",t),e.state.isEdit&&t.rowData.id&&e.setState({status:!!t.rowData.status,isEdit:!1}),u.a.createElement(m.a,{size:"small",color:"primary",checked:e.state.status,onChange:function(t){return e.setState({status:t.target.checked})}})}}];this.setState({columns:[].concat(a)})}v.a.showUsers({instance_id:this.instance_id,pagination:1}).then((function(t){t.roles.map((function(e){b[e.role]=e.role})),t.instances.map((function(e){E[e.id]=e.instanceName})),e.setState((function(e){var a=t.users;return Object(i.a)(Object(i.a)({},e),{},{data:a})}))}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"tables-wrapper search-table-wrap"},u.a.createElement(g.f,{title:u.a.createElement(w.a,{id:"sidebar.users"}),center:!0}),u.a.createElement(p.a,{maxWidth:"lg"},u.a.createElement(h.a,{px:{xs:"12px",lg:0},className:"page-space"},u.a.createElement(f.a,{title:u.a.createElement(w.a,{id:"sidebar.users"}),columns:this.state.columns,localization:{header:{actions:"Funktionen"}},data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a){setTimeout((function(){a(),console.log("newData",t),t.status=e.state.status?1:0,e.instance_id&&(t.instance_id=e.instance_id);var r=new FormData;r.append("file",t.userAvatar),t.userAvatar="",r.append("data",JSON.stringify(t)),t.name&&t.email&&t.password&&t.role?v.a.addUsers(r).then((function(t){console.log("res",t),e.setState((function(e){var a=Object(n.a)(e.data);a.push(t);return Object(i.a)(Object(i.a)({},e),{},{data:a,status:!0})}))})).catch((function(e){alert("Diese E-Mail existiert bereits oder ist ein Netzwerkfehler.")})):alert("Bitte f\xfcllen Sie die erforderlichen Felder aus.")}),600)}))},onRowUpdate:function(t,a){return new Promise((function(r){setTimeout((function(){r(),console.log("newdata",t.id),t.status=e.state.status?1:0;var s=new FormData;"object"==typeof t.userAvatar&&(s.append("file",t.userAvatar),t.userAvatar=""),s.append("data",JSON.stringify(t)),v.a.editUsers(s).then((function(r){a&&e.setState((function(e){t.userAvatar=r.userAvatar;var s=Object(n.a)(e.data);s[s.indexOf(a)]=t;return Object(i.a)(Object(i.a)({},e),{},{data:s,status:!0,isEdit:!0})}))})).catch((function(e){alert("Diese E-Mail existiert bereits oder ist ein Netzwerkfehler.")}))}),600)}))},onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),console.log(";oldData",t.id),v.a.deleteUsers({id:t.id}).then((function(a){console.log("res",a),e.setState((function(e){var a=Object(n.a)(e.data);return a.splice(a.indexOf(t),1),Object(i.a)(Object(i.a)({},e),{},{data:a})}))}))}),600)}))}}}))))}}]),a}(c.Component);t.default=O}}]);
//# sourceMappingURL=72.c8002dfa.chunk.js.map