(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[59],{2023:function(e,t,n){"use strict";n.r(t);var s=n(7),i=n(195),a=n(15),o=n(16),r=n(18),c=n(17),l=n(0),d=n.n(l),u=n(1572),m=n.n(u),f=n(1537),p=n(61),b=n(237),h=n(14),O=n(30),v=n(1615),g=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).onChange=function(e){s.setState({selectedPermissions:Object(i.a)(e.target.value)})},s.state={columns:[{title:"ID",field:"id",editComponent:function(e){return d.a.createElement("div",null,e.id)}},{title:"Role",field:"role"},{title:"Permissions",field:"permissions",render:function(e){var t=JSON.parse(e.permissions);return d.a.createElement("div",null,t.map((function(e,t){return d.a.createElement("div",{key:t},e)})))},editComponent:function(e){if(e.rowData.id){console.log("rowData",e);var t=JSON.parse(e.rowData.permissions);t||(t=[]),s.state.isEditPermissions&&s.setState({selectedPermissions:t,isEditPermissions:!1})}return d.a.createElement(v.b,{data:s.state.permissionsList,onChange:s.onChange,value:s.state.selectedPermissions})}}],data:[],selectedPermissions:[],permissionsList:[],isEditPermissions:!0},s}return Object(o.a)(n,[{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,console.log("res",this.instance_id),b.a.showRoles({instance_id:this.instance_id,pagination:1}).then((function(t){var n=t.permissions.map((function(e){return e.permissions}));e.setState({permissionsList:n}),e.setState((function(e){var n=t.roles;return Object(s.a)(Object(s.a)({},e),{},{data:n})}))}))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"tables-wrapper search-table-wrap"},d.a.createElement(h.f,{title:d.a.createElement(O.a,{id:"sidebar.roles"}),center:!0}),d.a.createElement(f.a,{maxWidth:"lg"},d.a.createElement(p.a,{px:{xs:"12px",lg:0},className:"page-space"},d.a.createElement(m.a,{title:d.a.createElement(O.a,{id:"sidebar.roles"}),columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(n){n(),console.log("newData",t),t.instance_id=e.instance_id,t.permissions=JSON.stringify(e.state.selectedPermissions),b.a.addRoles(t).then((function(t){console.log("res",t),e.setState((function(e){var n=Object(i.a)(e.data),a=[];a.push(t),a=[].concat(Object(i.a)(a),Object(i.a)(n)).slice(0);return Object(s.a)(Object(s.a)({},e),{},{data:a,selectedPermissions:[],isEditPermissions:!0})}))}))}))},onRowUpdate:function(t,n){return new Promise((function(a){setTimeout((function(){a(),console.log("newdata",t.id),t.permissions=JSON.stringify(e.state.selectedPermissions),b.a.editRoles(t).then((function(a){n&&e.setState((function(e){var a=Object(i.a)(e.data);a[a.indexOf(n)]=t;return Object(s.a)(Object(s.a)({},e),{},{data:a,selectedPermissions:[],isEditPermissions:!0})}))}))}),600)}))},onRowDelete:function(t){return new Promise((function(n){setTimeout((function(){n(),console.log(";oldData",t.id),b.a.deleteRoles({id:t.id}).then((function(n){console.log("res",n),e.setState((function(e){var n=Object(i.a)(e.data);return n.splice(n.indexOf(t),1),Object(s.a)(Object(s.a)({},e),{},{data:n})}))}))}),600)}))}}}))))}}]),n}(l.Component);t.default=g}}]);
//# sourceMappingURL=59.d031f206.chunk.js.map