(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[55],{2019:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(195),i=a(15),s=a(16),c=a(18),o=a(17),l=a(0),u=a.n(l),d=a(1572),f=a.n(d),p=a(404),m=a(1555),h=a(1537),v=a(61),g=a(1615),y=a(237),S=a(14),b=a(30),E=[],C=[],O={Herr:"Herr",Frau:"Frau"},D={1:1,2:2,3:3,4:4,5:5},N={Aktiv:"Aktiv",Inaktiv:"Inaktiv","Unvollst\xe4ndig":"Unvollst\xe4ndig"},w={},U=[],k=[],j=[],J=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).handleChangeDate=function(e){r.setState({birthday:e.target.value})},r.onChangeDoctor=function(e){r.setState({familyDoctor:e.target.value})},r.onChangePharmacies=function(e){r.setState({pharmacy:e.target.value})},r.onChangeInsurance=function(e){r.setState({insurance:e.target.value})},r.onChangeResources=function(e){r.setState({selected:Object(n.a)(e.target.value)})},r.onChangeUsers=function(e){r.setState({selectedUsers:Object(n.a)(e.target.value)})},r.onChangeServices=function(e){r.setState({selectedservice:Object(n.a)(e.target.value)})},r.state={columns:[{title:"Picture",field:"picture",render:function(e){return u.a.createElement("img",{src:e.picture?e.picture:r.defaultUrl,className:"logo-td bdr-rad-50"})},editComponent:function(e){return u.a.createElement("input",{type:"file",onChange:function(t){return e.onChange(t.target.files[0])}})}},{title:"Salutation",field:"salutation",lookup:O},{title:"*First Name",field:"firstName"},{title:"*Last Name",field:"lastName"},{title:"Street nr",field:"streetNr"},{title:"zip code",field:"zipCode"},{title:"City",field:"city"},{title:"Birthday",field:"birthday",render:function(e){return u.a.createElement("div",null,e.birthday)},editComponent:function(e){return u.a.createElement(p.a,{className:"full-width",id:"date",type:"date",defaultValue:"2017-05-24",InputLabelProps:{shrink:!0},value:r.state.birthday,onChange:r.handleChangeDate})}},{title:"*Phone 1",field:"phone1"},{title:"*Phone 2",field:"phone2"},{title:"E-Mail",field:"email"},{title:"Resources",field:"resources",render:function(e){var t=[];return(t=JSON.parse(e.resources))||(t=[]),u.a.createElement("div",null,t.map((function(e,t){return u.a.createElement("div",{key:t},e)})))},editComponent:function(e){if(e.rowData.id){var t=JSON.parse(e.rowData.resources);t||(t=[]),r.state.isEditResources&&r.setState({selected:t,isEditResources:!1})}return u.a.createElement(g.b,{data:U,value:r.state.selected,onChange:r.onChangeResources})}},{title:"*Insurance",field:"insurance",editComponent:function(e){return u.a.createElement(g.a,{data:E,placeholder:"Select Insurance",onChange:r.onChangeInsurance})}},{title:"Services",field:"services",render:function(e){var t=JSON.parse(e.services);return t||(t=[]),u.a.createElement("div",null,k.map((function(e,t){return u.a.createElement("div",{key:t},e)})))},editComponent:function(e){if(console.log("rowData.rowData.id",e.rowData.id),e.rowData.id){var t=JSON.parse(e.rowData.services);console.log("currentService",t),t||(t=[]),r.state.isEditServices&&r.setState({selectedservice:t,isEditServices:!1})}return u.a.createElement(g.b,{data:k,value:r.state.selectedservice,onChange:r.onChangeServices})}},{title:"*Family Doctor",field:"familyDoctor",editComponent:function(e){return u.a.createElement(g.a,{data:w,placeholder:"Select Family doctor",onChange:r.onChangeDoctor})}},{title:"Key number",field:"keyNumber",type:"numeric"},{title:"Floor",field:"floor",type:"numeric"},{title:"Degree of care",field:"degreeCare",lookup:D},{title:"*Pharmacy",field:"pharmacy",editComponent:function(e){return u.a.createElement(g.a,{data:C,placeholder:"Select Pharmacy",onChange:r.onChangePharmacies})}},{title:"User group",field:"userGroup",render:function(e){var t=[];return(t=JSON.parse(e.userGroup))||(t=[]),u.a.createElement("div",null,t.map((function(e,t){return u.a.createElement("div",{key:t},e)})))},editComponent:function(e){if(e.rowData.id){var t=JSON.parse(e.rowData.userGroup);t||(t=[]),r.state.isEditUsers&&r.setState({selectedUsers:t,isEditUsers:!1})}return u.a.createElement(g.b,{data:j,value:r.state.selectedUsers,onChange:r.onChangeUsers})}},{title:"Status",field:"status",lookup:N},{title:"Serviceplan",field:"serviceplan",render:function(e){return u.a.createElement(m.a,{size:"small",color:"primary",checked:!!e.serviceplan})},editComponent:function(e){return r.state.isEditServiceplan&&e.rowData.id&&r.setState({serviceplan:!!e.rowData.serviceplan,isEditServiceplan:!1}),u.a.createElement(m.a,{size:"small",color:"primary",checked:r.state.serviceplan,onChange:function(e){return r.setState({serviceplan:e.target.checked})}})}}],data:[],selected:[],selectedservice:[],selectedUsers:[],isEditServices:!0,isEditResources:!0,isEditUsers:!0,isEditServiceplan:!0,serviceplan:!0,insurance:"",pharmacy:"",birthday:""},r}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.defaultUrl="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSTbZrzTIuXAe01k5wgrhWGzPRPRliQygmBCA&usqp=CAU";var t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,console.log("res",this.instance_id),y.a.showPatients({instance_id:this.instance_id,pagination:1}).then((function(t){U=[],k=[],k=t.services.map((function(e){return e.services})),U=t.resources.map((function(e){return e.resources})),j=t.users.map((function(e){return e.name})),w=t.family_doctors.map((function(e){return e.doctorName})),E=t.insurances.map((function(e){return e.insurances})),C=t.pharmacies.map((function(e){return e.pharmacyName})),e.setState((function(e){var a=t.patients;return Object(r.a)(Object(r.a)({},e),{},{data:a})}))}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"tables-wrapper search-table-wrap"},u.a.createElement(S.f,{title:u.a.createElement(b.a,{id:"sidebar.patients"}),center:!0}),u.a.createElement(h.a,{maxWidth:"lg"},u.a.createElement(v.a,{px:{xs:"12px",lg:0},className:"page-space"},u.a.createElement(f.a,{title:u.a.createElement(b.a,{id:"sidebar.patients"}),columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a){setTimeout((function(){if(a(),t.instance_id=e.instance_id,t.resources=JSON.stringify(e.state.selected),t.services=JSON.stringify(e.state.selectedservice),t.userGroup=JSON.stringify(e.state.selectedUsers),t.insurance=e.state.insurance,t.familyDoctor=e.state.familyDoctor,t.pharmacy=e.state.pharmacy,t.birthday=e.state.birthday,e.state.pharmacy&&e.state.familyDoctor&&t.firstName&&t.lastName&&t.phone1&&t.phone2){var i=new FormData;i.append("file",t.picture),t.picture="",i.append("data",JSON.stringify(t)),y.a.addPatients(i).then((function(t){e.setState((function(e){var a=Object(n.a)(e.data);return a.push(t),Object(r.a)(Object(r.a)({},e),{},{data:Object(n.a)(a)})})),e.setState({selected:[],selectedservice:[],isEditServices:!0,isEditResources:!0,isEditServiceplan:!0,isEditUsers:!0,insurance:"",familyDoctor:"",pharmacy:"",birthday:"",selectedUsers:[]})})).catch((function(e){console.log("erro",e),alert(e.message)}))}else alert("Bitte f\xfcllen Sie die erforderlichen Felder aus.")}),600)}))},onRowUpdate:function(t,a){return new Promise((function(i){setTimeout((function(){i();var s=new FormData;"object"==typeof t.picture&&(s.append("file",t.picture),t.picture=""),e.state.selected.length&&(t.resources=JSON.stringify(e.state.selected)),e.state.selectedservice.length&&(t.services=JSON.stringify(e.state.selectedservice)),e.state.selectedUsers.length&&(t.userGroup=JSON.stringify(e.state.selectedUsers)),e.state.insurance&&(t.insurance=e.state.insurance),e.state.familyDoctor&&(t.familyDoctor=e.state.familyDoctor),e.state.pharmacy&&(t.pharmacy=e.state.pharmacy),e.state.birthday&&(t.birthday=e.state.birthday),s.append("data",JSON.stringify(t)),t.pharmacy&&t.familyDoctor&&t.firstName&&t.lastName&&t.phone1&&t.phone2?y.a.editPatients(s).then((function(t){if(a){e.setState((function(e){var i=Object(n.a)(e.data);return i[i.indexOf(a)]=t,Object(r.a)(Object(r.a)({},e),{},{data:i})}));e.setState({selected:[],selectedservice:[],isEditServices:!0,isEditResources:!0,isEditServiceplan:!0,isEditUsers:!0,insurance:"",familyDoctor:"",pharmacy:"",birthday:"",selectedUsers:[]})}})):alert("Bitte f\xfcllen Sie die erforderlichen Felder aus.")}),600)}))},onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),console.log(";oldData",t.id),y.a.deletePatients({id:t.id}).then((function(a){console.log("res",a),e.setState((function(e){var a=Object(n.a)(e.data);return a.splice(a.indexOf(t),1),Object(r.a)(Object(r.a)({},e),{},{data:a})}))}))}),600)}))}}}))))}}]),a}(l.Component);t.default=J}}]);
//# sourceMappingURL=55.17931e4f.chunk.js.map