(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[40],{1708:function(e,t,a){"use strict";var n=a(15),i=a(16),r=a(18),s=a(17),c=a(0),o=a.n(c),l=a(1491),d=a(1494),u=a(61),m=a(1616),f=a.n(m),p=(a(11),a(30),function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={open:!1,instance:null,title:"",content:"",name:"",street:"",zip:"",city:"",insurance:"",insuranceNr:"",birthday:"",phone:""},i.pdfExportComponent=o.a.createRef(),i}return Object(i.a)(a,[{key:"openDialog",value:function(){var e=this;this.setState({open:!0},(function(){var t=e.state,a=t.name,n=t.street,i=t.zip,r=t.city,s=t.insurance,c=t.insuranceNr,o=t.birthday,l=t.phone;setTimeout((function(){for(var t=document.getElementsByClassName("name"),d=0;d<t.length;d++)document.getElementsByClassName("name")[d].innerText=a;for(var u=document.getElementsByClassName("street"),m=0;m<u.length;m++)document.getElementsByClassName("street")[m].innerText=n;for(var f=document.getElementsByClassName("zip"),p=0;p<f.length;p++)document.getElementsByClassName("zip")[p].innerText=i;for(var h=document.getElementsByClassName("city"),v=0;v<h.length;v++)document.getElementsByClassName("city")[v].innerText=r;for(var g=document.getElementsByClassName("insurance"),y=0;y<g.length;y++)document.getElementsByClassName("insurance")[y].innerText=s;for(var b=document.getElementsByClassName("insuranceNr"),E=0;E<b.length;E++)document.getElementsByClassName("insuranceNr")[E].innerText=c;for(var N=document.getElementsByClassName("birthday"),S=0;S<N.length;S++)document.getElementsByClassName("birthday")[S].innerText=e.formate_date(o);for(var O=document.getElementsByClassName("phone"),C=0;C<O.length;C++)document.getElementsByClassName("phone")[C].innerText=l}),10)}))}},{key:"formate_date",value:function(e){var t="";e&&(t=(t=e.split(" ")[0].split("-"))[2]+"."+t[1]+"."+t[0]);return t}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1})}},{key:"getUrl",value:function(e){return"/backend_latest/file_storage/"+e.split("/")[5]}},{key:"render",value:function(){var e=this;return o.a.createElement(l.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},o.a.createElement(d.a,{className:"p-10 downloadPaper"},o.a.createElement(u.a,null,o.a.createElement(f.a,{className:"closeBtn",onClick:function(){return e.onCloseDialog(!1)}})),o.a.createElement("div",{id:"downloadArea"},this.props.selectedDocumentList.map((function(e,t){return o.a.createElement(u.a,{key:t,className:"pageContainer",id:"page-".concat(t)},o.a.createElement("div",{className:"p-10"},o.a.createElement("div",{variant:"h5",className:"title",textAlign:"left"},e.title)),o.a.createElement("div",{className:"p-10 contentHtml"},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})))})))))}}]),a}(o.a.Component));t.a=p},2404:function(e,t,a){"use strict";a.r(t);var n=a(7),i=a(194),r=a(15),s=a(16),c=a(18),o=a(17),l=a(0),d=a.n(l),u=a(1584),m=a.n(u),f=a(33),p=a(2342),h=a(408),v=a(1564),g=a(1546),y=a(61),b=a(1632),E=a(237),N=a(11),S=a(30),O=a(38),C=a(1708),D=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"getUrl",value:function(e){var t="/backend_latest/file_storage/"+e.split("/")[5];return console.log("url",t),t}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("instanceInfo"));return l.createElement("div",null,l.createElement("div",{style:{position:"absolute",top:"50px",left:"60px"},id:"header"},l.createElement("img",{src:this.getUrl(e.instanceLogo),height:"auto",width:"100px"})),l.createElement("div",{style:{position:"absolute",bottom:"30px",right:"30px",fontSize:"12px"},id:"footer"},"Seite ",this.props.pageNum," von ",this.props.totalPages),l.createElement("div",{style:{position:"absolute",bottom:"30px",left:"60px",fontSize:"12px",color:"#b6b6b6"},id:"footer"},l.createElement("div",null,e.instanceName),"Mail :  ",e.email))}}]),a}(l.Component),w=[],k=[],j={Herr:"Herr",Frau:"Frau"},x={1:1,2:2,3:3,4:4,5:5},U={Aktiv:"Aktiv",Inaktiv:"Inaktiv","Unvollst\xe4ndig":"Unvollst\xe4ndig"},_={},B=[],J=[],P=[],I={},R=[],T=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleChangeDate=function(e){n.setState({birthday:e.target.value})},n.onChangeDoctor=function(e){n.setState({familyDoctor:e.target.value})},n.onChangePharmacies=function(e){n.setState({pharmacy:e.target.value})},n.onChangeInsurance=function(e){n.setState({insurance:e.target.value})},n.onChangeResources=function(e){n.setState({selected:Object(i.a)(e.target.value)})},n.onChangeUsers=function(e){var t=Object(i.a)(e.target.value);(t.length==P.length-1||t.indexOf("all")>-1)&&(t=["all"]),n.setState({selectedUsers:t})},n.onChangeServices=function(e){n.setState({selectedservice:Object(i.a)(e.target.value)}),console.log("selectedservices",n.state.selectedservice,Object(i.a)(e.target.value))},n.state={columns:[{title:"Picture",field:"picture",render:function(e){return d.a.createElement("img",{src:e.picture?e.picture:n.defaultUrl,className:"logo-td bdr-rad-50"})},editComponent:function(e){return d.a.createElement("input",{type:"file",onChange:function(t){return e.onChange(t.target.files[0])}})}},{title:"Salutation",field:"salutation",lookup:j},{title:"*First Name",field:"firstName"},{title:"*Last Name",field:"lastName"},{title:"Street nr",field:"streetNr"},{title:"zip code",field:"zipCode"},{title:"City",field:"city"},{title:"Birthday",field:"birthday",render:function(e){return d.a.createElement("div",null,n.formate_date(e.birthday))},editComponent:function(e){return d.a.createElement(h.a,{className:"full-width",id:"date",type:"date",defaultValue:"2017-05-24",InputLabelProps:{shrink:!0},value:n.state.birthday,onChange:n.handleChangeDate})}},{title:"Phone 1",field:"phone1"},{title:"Phone 2",field:"phone2"},{title:"E-Mail",field:"email"},{title:"Resources",field:"resources",render:function(e){var t=[];return(t=JSON.parse(e.resources))||(t=[]),d.a.createElement("div",null,t.map((function(e,t){return d.a.createElement("div",{key:t},e)})))},editComponent:function(e){if(e.rowData.id){var t=JSON.parse(e.rowData.resources);t||(t=[]),n.state.isEditResources&&n.setState({selected:t,isEditResources:!1})}return d.a.createElement(b.b,{data:B,value:n.state.selected,onChange:n.onChangeResources})}},{title:"*Insurance",field:"insurance",editComponent:function(e){return d.a.createElement(b.a,{data:w,placeholder:"Select Insurance",onChange:n.onChangeInsurance})}},{title:"*Insurance Nr",field:"insuranceNr"},{title:"Services",field:"services",render:function(e){var t=JSON.parse(e.services);return t||(t=[]),d.a.createElement("div",{className:"serviceContainer"},d.a.createElement("div",null,t.map((function(e,t){return d.a.createElement("div",{key:t},e)}))))},editComponent:function(e){if(console.log("rowData.rowData.id",e.rowData.id),e.rowData.id){var t=JSON.parse(e.rowData.services);console.log("currentService",t),t||(t=[]),n.state.isEditServices&&n.setState({selectedservice:t,isEditServices:!1})}return d.a.createElement(b.b,{data:J,value:n.state.selectedservice,onChange:n.onChangeServices})}},{title:"*Family Doctor",field:"familyDoctor",editComponent:function(e){return d.a.createElement(b.a,{data:_,placeholder:"Select Family doctor",onChange:n.onChangeDoctor})}},{title:"Key number",field:"keyNumber",type:"numeric"},{title:"Floor",field:"floor",type:"numeric"},{title:"Degree of care",field:"degreeCare",lookup:x},{title:"*Pharmacy",field:"pharmacy",editComponent:function(e){return d.a.createElement(b.a,{data:k,placeholder:"Select Pharmacy",onChange:n.onChangePharmacies})}},{title:"Instance",field:"instance_id",render:function(e){return R.find((function(t,a){return a==e.instance_id}))?d.a.createElement("div",null,R[e.instance_id]):d.a.createElement("div",null)},editComponent:function(e){return R.find((function(t,a){return a==e.rowData.instance_id}))?d.a.createElement("div",null,R[e.rowData.instance_id]):d.a.createElement("div",null)}},{title:"Related Users",field:"userGroup",render:function(e){var t=[];return(t=JSON.parse(e.userGroup))||(t=[]),d.a.createElement("div",null,t.map((function(e,t){return d.a.createElement("div",{key:t},e)})))},editComponent:function(e){if(e.rowData.id){var t=JSON.parse(e.rowData.userGroup);t||(t=[]),n.state.isEditUsers&&n.setState({selectedUsers:t,isEditUsers:!1})}return d.a.createElement(b.b,{data:P,value:n.state.selectedUsers,onChange:n.onChangeUsers})}},{title:"Status",field:"status",lookup:U},{title:"Serviceplan",field:"serviceplan",render:function(e){return d.a.createElement(v.a,{size:"small",color:"primary",checked:!!e.serviceplan})},editComponent:function(e){return console.log("rowData",e),n.state.isEditServiceplan&&e.rowData.id&&n.setState({serviceplan:!!e.rowData.serviceplan,isEditServiceplan:!1}),d.a.createElement(v.a,{size:"small",color:"primary",checked:n.state.serviceplan,onChange:function(e){return n.setState({serviceplan:e.target.checked})}})}}],data:[],selected:[],selectedservice:[],selectedUsers:[],isEditServices:!0,isEditResources:!0,isEditUsers:!0,isEditServiceplan:!0,serviceplan:!0,insurance:"",pharmacy:"",birthday:"",documentsList:[],folders:[],downloadDocs:[]},n.preViewDialog=d.a.createRef(),n}return Object(s.a)(a,[{key:"formate_date",value:function(e){var t="";e&&(t=(t=e.split(" ")[0].split("-"))[2]+"."+t[1]+"."+t[0]);return t}},{key:"previewDocument",value:function(e,t){var a=this;console.log("previewDocument",e);var n=[];if(this.state.folders.forEach((function(t){if(e.indexOf(t.service)>-1){var a=JSON.parse(t.documents),r=Object(i.a)(n);console.log("folderDocs",a,r),n=r.concat(a)}})),console.log("ssssssss",n.length,e),(n=Object(i.a)(new Set(n))).length){var r=this.state.documentsList.filter((function(e){return n.indexOf(e.id)>-1})),s=t.firstName+" "+t.lastName,c=t.streetNr,o=t.zipCode,l=t.city,d=t.insurance,u=t.insuranceNr,m=t.birthday,f=t.phone1;this.preViewDialog.current.setState({name:s,street:c,zip:o,city:l,insurance:d,insuranceNr:u,birthday:m,phone:f}),this.setState({downloadDocs:Object(i.a)(r)}),this.preViewDialog.current.openDialog(),setTimeout((function(){a.generatePdf(a.state.downloadDocs.length)}),2e3)}else O.NotificationManager.warning("Es gibt keine Pflegeordner, die optionale Dienste anbieten.")}},{key:"generatePdf",value:function(e){console.log("instances",I);var t={instanceName:I.instanceName,instanceLogo:I.instanceLogo,email:I.email,name:I.name};localStorage.setItem("instanceInfo",JSON.stringify(t)),console.log("instanceInfo",t),Object(p.a)(f.findDOMNode(document.getElementById("downloadArea")),{pageTemplate:D,paperSize:[794,1123],margin:{top:70,left:50,right:20,bottom:70}})}},{key:"formate",value:function(e,t){console.log("formate");for(var a=0;a<e;a++){var n=document.getElementById("page-"+a).clientHeight;n>t&&(document.getElementById("page-"+a).style.paddingBottom=t-n%t+"px")}return[]}},{key:"componentWillMount",value:function(){var e=this;this.defaultUrl="http://base.mastermedi-1.vautronserver.de/backend_latest/file_storage/1602322608icon-patient-kl.png";var t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,console.log("res",this.instance_id),E.a.showPatients({instance_id:this.instance_id,pagination:1}).then((function(t){B=[],J=[],J=t.services.map((function(e){return e.services})),B=t.resources.map((function(e){return e.resources})),(P=t.users.map((function(e){return e.name}))).push("all"),_=t.family_doctors.map((function(e){return e.doctorName})),w=t.insurances.map((function(e){return e.insurances})),k=t.pharmacies.map((function(e){return e.pharmacyName})),t.instances.length&&(I=t.instances[0]),t.instanceNames.map((function(e){R[e.id]=e.instanceName})),console.log("resinstanceName",R),e.setState((function(e){var a=t.patients,i=t.documents,r=t.folders;return Object(n.a)(Object(n.a)({},e),{},{data:a,documentsList:i,folders:r})}))}))}},{key:"render",value:function(){var e=this,t=this.instance_id?{onRowAdd:function(t){return new Promise((function(a){setTimeout((function(){if(a(),t.instance_id=e.instance_id,t.resources=JSON.stringify(e.state.selected),t.services=JSON.stringify(e.state.selectedservice),t.userGroup=JSON.stringify(e.state.selectedUsers),t.insurance=e.state.insurance,t.familyDoctor=e.state.familyDoctor,t.pharmacy=e.state.pharmacy,t.birthday=e.state.birthday,t.serviceplan=e.state.serviceplan,e.state.pharmacy&&e.state.familyDoctor&&t.firstName&&t.lastName){var r=new FormData;r.append("file",t.picture),t.picture="",r.append("data",JSON.stringify(t)),E.a.addPatients(r).then((function(t){e.setState((function(e){var a=Object(i.a)(e.data);return a.push(t),Object(n.a)(Object(n.a)({},e),{},{data:Object(i.a)(a)})})),e.setState({selected:[],selectedservice:[],isEditServices:!0,isEditResources:!0,isEditServiceplan:!0,isEditUsers:!0,insurance:"",familyDoctor:"",pharmacy:"",birthday:"",selectedUsers:[]})})).catch((function(e){console.log("erro",e),alert(e.message)}))}else alert("Bitte f\xfcllen Sie die erforderlichen Felder aus.")}),600)}))},onRowUpdate:function(t,a){return new Promise((function(r){setTimeout((function(){r();var s=new FormData;"object"==typeof t.picture&&(s.append("file",t.picture),t.picture=""),console.log("dddddddddd---",e.state.selectedservice),t.resources=JSON.stringify(e.state.selected),t.services=JSON.stringify(e.state.selectedservice),t.userGroup=JSON.stringify(e.state.selectedUsers),e.state.insurance&&(t.insurance=e.state.insurance),e.state.familyDoctor&&(t.familyDoctor=e.state.familyDoctor),e.state.pharmacy&&(t.pharmacy=e.state.pharmacy),e.state.birthday&&(t.birthday=e.state.birthday),e.state.serviceplan&&(t.serviceplan=e.state.serviceplan),s.append("data",JSON.stringify(t)),t.pharmacy&&t.familyDoctor&&t.firstName&&t.lastName?E.a.editPatients(s).then((function(t){if(a){e.setState((function(e){var r=Object(i.a)(e.data);return r[r.indexOf(a)]=t,Object(n.a)(Object(n.a)({},e),{},{data:r})}));e.setState({selected:[],selectedservice:[],isEditServices:!0,isEditResources:!0,isEditServiceplan:!0,isEditUsers:!0,insurance:"",familyDoctor:"",pharmacy:"",birthday:"",selectedUsers:[],serviceplan:!0})}})):alert("Bitte f\xfcllen Sie die erforderlichen Felder aus.")}),600)}))},onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),console.log(";oldData",t.id),E.a.deletePatients({id:t.id}).then((function(a){console.log("res",a),e.setState((function(e){var a=Object(i.a)(e.data);return a.splice(a.indexOf(t),1),Object(n.a)(Object(n.a)({},e),{},{data:a})}))}))}),600)}))}}:{onRowUpdate:function(t,a){return new Promise((function(r){setTimeout((function(){r();var s=new FormData;"object"==typeof t.picture&&(s.append("file",t.picture),t.picture=""),e.state.selected.length&&(t.resources=JSON.stringify(e.state.selected)),e.state.selectedservice.length&&(t.services=JSON.stringify(e.state.selectedservice)),e.state.selectedUsers.length&&(t.userGroup=JSON.stringify(e.state.selectedUsers)),e.state.insurance&&(t.insurance=e.state.insurance),e.state.familyDoctor&&(t.familyDoctor=e.state.familyDoctor),e.state.pharmacy&&(t.pharmacy=e.state.pharmacy),e.state.birthday&&(t.birthday=e.state.birthday),e.state.serviceplan&&(t.serviceplan=e.state.serviceplan),s.append("data",JSON.stringify(t)),t.pharmacy&&t.familyDoctor&&t.firstName&&t.lastName?E.a.editPatients(s).then((function(t){if(a){e.setState((function(e){var r=Object(i.a)(e.data);return r[r.indexOf(a)]=t,Object(n.a)(Object(n.a)({},e),{},{data:r})}));e.setState({selected:[],selectedservice:[],isEditServices:!0,isEditResources:!0,isEditServiceplan:!0,isEditUsers:!0,insurance:"",familyDoctor:"",pharmacy:"",birthday:"",selectedUsers:[],serviceplan:!0})}})):alert("Bitte f\xfcllen Sie die erforderlichen Felder aus.")}),600)}))},onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),console.log(";oldData",t.id),E.a.deletePatients({id:t.id}).then((function(a){console.log("res",a),e.setState((function(e){var a=Object(i.a)(e.data);return a.splice(a.indexOf(t),1),Object(n.a)(Object(n.a)({},e),{},{data:a})}))}))}),600)}))}};return d.a.createElement("div",{className:"tables-wrapper search-table-wrap"},d.a.createElement(N.f,{title:d.a.createElement(S.a,{id:"sidebar.patients"}),center:!0}),d.a.createElement(g.a,{maxWidth:"lg"},d.a.createElement(y.a,{px:{xs:"12px",lg:0},className:"page-space patient-container"},d.a.createElement(m.a,{title:d.a.createElement(S.a,{id:"sidebar.patients"}),columns:this.state.columns,data:this.state.data,options:{actionRowIndex:-1},editable:t,actions:this.instance_id?[{icon:"folder_outlined_icon",tooltip:"Download Care Folder",onClick:function(t,a){var n=JSON.parse(a.services);e.previewDocument(n,a)}}]:[]}))),d.a.createElement(C.a,{ref:this.preViewDialog,selectedDocumentList:this.state.downloadDocs}))}}]),a}(l.Component);t.default=T}}]);
//# sourceMappingURL=40.aa303758.chunk.js.map