(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[54],{2026:function(e,t,i){"use strict";i.r(t);var a=i(413),n=i(7),r=i(14),s=i(15),c=i(17),o=i(16),l=i(0),d=i.n(l),u=i(1577),p=i.n(u),f=i(1555),m=i(1537),v=i(61),h=i(1860),S=i.n(h),g=i(236),b=i(18),E=i(30),y={},O={},N={},w=[],D=[],j=function(e){Object(c.a)(i,e);var t=Object(o.a)(i);function i(e){var a;return Object(r.a)(this,i),(a=t.call(this,e)).state={columns:[{title:"Picture",field:"picture",render:function(e){return d.a.createElement("img",{src:e.picture?e.picture:a.defaultUrl,className:"logo-td bdr-rad-50"})},editComponent:function(e){return d.a.createElement("input",{type:"file",onChange:function(t){return e.onChange(t.target.files[0])}})}},{title:"Salutation",field:"salutation"},{title:"First Name",field:"firstName"},{title:"Last Name",field:"lastName"},{title:"Street nr",field:"streetNr"},{title:"zip code",field:"zipCode"},{title:"City",field:"city"},{title:"Birthday",field:"birthday"},{title:"Phone 1",field:"phone1"},{title:"Phone 2",field:"phone2"},{title:"E-Mail",field:"email"},{title:"Resources",field:"resources",render:function(e){var t=JSON.parse(e.resources);return t||(t=[]),d.a.createElement(S.a,{options:w,selected:t})},editComponent:function(e){if(e.rowData.id){var t=JSON.parse(e.rowData.resources);t||(t=[]),a.state.isEditResources&&a.setState({selected:t,isEditResources:!1})}return d.a.createElement(S.a,{options:w,selected:a.state.selected,onSelectedChanged:function(e){return a.setState({selected:e})}})}},{title:"Insurance",field:"insurance",lookup:y},{title:"Services",field:"services",render:function(e){var t=JSON.parse(e.services);return t||(t=[]),d.a.createElement(S.a,{name:"services",options:D,selected:t})},editComponent:function(e){if(console.log("rowData.rowData.id",e.rowData.id),e.rowData.id){var t=JSON.parse(e.rowData.services);console.log("currentService",t),t||(t=[]),a.state.isEditServices&&a.setState({selectedservice:t,isEditServices:!1})}return d.a.createElement(S.a,{options:D,selected:a.state.selectedservice,onSelectedChanged:function(e){console.log("selectedservice",e),a.setState({selectedservice:e})}})}},{title:"Family Doctor",field:"familyDoctor",lookup:N},{title:"Key number",field:"keyNumber",type:"numeric"},{title:"Floor",field:"floor",type:"numeric"},{title:"Degree of care",field:"degreeCare"},{title:"Pharmacy",field:"pharmacy",lookup:O},{title:"User group",field:"userGroup"},{title:"Status",field:"status"},{title:"Serviceplan",field:"serviceplan",render:function(e){return d.a.createElement(f.a,{size:"small",color:"primary",checked:!!e.serviceplan})},editComponent:function(e){return a.state.isEditServiceplan&&e.rowData.id&&a.setState({serviceplan:!!e.rowData.serviceplan,isEditServiceplan:!1}),d.a.createElement(f.a,{size:"small",color:"primary",checked:a.state.serviceplan,onChange:function(e){return a.setState({serviceplan:e.target.checked})}})}}],data:[],selected:[],selectedservice:[],isEditServices:!0,isEditResources:!0,isEditServiceplan:!0,serviceplan:!0},a}return Object(s.a)(i,[{key:"componentDidMount",value:function(){var e=this;this.defaultUrl="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSTbZrzTIuXAe01k5wgrhWGzPRPRliQygmBCA&usqp=CAU";var t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,console.log("res",this.instance_id),g.a.showPatients({instance_id:this.instance_id,pagination:1}).then((function(t){w=[],D=[],t.services.map((function(e){D.push({label:e.services,value:e.services})})),t.resources.map((function(e){w.push({label:e.resources,value:e.resources})})),t.family_doctors.map((function(e){N[e.doctorName]=e.doctorName})),t.insurances.map((function(e){y[e.insurances]=e.insurances})),t.pharmacies.map((function(e){O[e.pharmacyName]=e.pharmacyName})),e.setState((function(e){var i=t.patients;return Object(n.a)(Object(n.a)({},e),{},{data:i})}))}))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"tables-wrapper search-table-wrap"},d.a.createElement(b.f,{title:d.a.createElement(E.a,{id:"sidebar.patients"}),center:!0}),d.a.createElement(m.a,{maxWidth:"lg"},d.a.createElement(v.a,{px:{xs:"12px",lg:0},className:"page-space"},d.a.createElement(p.a,{title:d.a.createElement(E.a,{id:"sidebar.patients"}),columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(i){setTimeout((function(){i(),t.instance_id=e.instance_id,t.resources=JSON.stringify(e.state.selected),t.services=JSON.stringify(e.state.selectedservice);var r=new FormData;r.append("file",t.picture),t.picture="",r.append("data",JSON.stringify(t)),g.a.addPatients(r).then((function(t){e.setState((function(e){var i=Object(a.a)(e.data);return i.push(t),Object(n.a)(Object(n.a)({},e),{},{data:i})})),e.setState({selected:[],selectedservice:[],isEditServices:!0,isEditResources:!0,isEditServiceplan:!0})}))}),600)}))},onRowUpdate:function(t,i){return new Promise((function(r){setTimeout((function(){r();var s=new FormData;"object"==typeof t.picture&&(s.append("file",t.picture),t.picture=""),t.resources=JSON.stringify(e.state.selected),t.services=JSON.stringify(e.state.selectedservice),s.append("data",JSON.stringify(t)),g.a.editPatients(s).then((function(t){if(i){e.setState((function(e){var r=Object(a.a)(e.data);return r[r.indexOf(i)]=t,Object(n.a)(Object(n.a)({},e),{},{data:r})}));e.setState({selected:[],selectedservice:[],isEditServices:!0,isEditResources:!0,isEditServiceplan:!0})}}))}),600)}))},onRowDelete:function(t){return new Promise((function(i){setTimeout((function(){i(),console.log(";oldData",t.id),g.a.deletePatients({id:t.id}).then((function(i){console.log("res",i),e.setState((function(e){var i=Object(a.a)(e.data);return i.splice(i.indexOf(t),1),Object(n.a)(Object(n.a)({},e),{},{data:i})}))}))}),600)}))}}}))))}}]),i}(l.Component);t.default=j}}]);
//# sourceMappingURL=54.eb8cc3b7.chunk.js.map