(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[65],{2376:function(e,t,a){"use strict";a.r(t);var n=a(28),i=a(7),r=a(194),o=a(15),c=a(16),d=a(18),l=a(17),s=a(0),u=a.n(s),m=a(1585),h=a.n(m),f=a(790),p=a(1521),g=a(408),v=a(789),b=a(1548),O=a(61),C=a(237),y=a(11),E=a(30),k=a(1618),w=a(19),N=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.setState({selectedMedications:Object(r.a)(e.target.value)})},n.handleChangePatients=function(e){var t=e.target.value,a=n.state.patients.filter((function(e){return e.id==t})),i=a[0].pharmacy,r=a[0].familyDoctor;n.setState({patient:e.target.value,pharmacy:i,doctor:r})},n.handleChangeNote=function(e){n.setState({note:e.target.value})},n.handleChangeDate=function(e){n.setState({date:e.target.value})},n.state={columns:[{title:"Order ID",field:"orderId",render:function(e){return u.a.createElement("div",null,u.a.createElement(w.b,{to:"/order-detail/".concat(e.orderId),target:"_blank"},e.orderId))},editComponent:function(e){return u.a.createElement("div",null,e.id)},filtering:!1},{title:"Medications*",field:"orderMedications",render:function(e){var t=JSON.parse(e.orderMedications);return u.a.createElement("div",null,t.map((function(e,t){return u.a.createElement("div",{key:t},e)})))},editComponent:function(e){if(e.rowData.id){console.log("rowData",e);var t=JSON.parse(e.rowData.orderMedications);t||(t=[]),n.state.isEditMedications&&n.setState({selectedMedications:t,isEditMedications:!1})}return u.a.createElement(k.b,{data:n.state.medications,onChange:n.onChange,value:n.state.selectedMedications})},filtering:!1},{title:"Patient*",field:"patient",render:function(e){return u.a.createElement("div",null,n.handleChangeIdToName(e.patient))},editComponent:function(e){return u.a.createElement(f.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",className:"full-width",value:n.state.patient,onChange:n.handleChangePatients},n.state.patients.map((function(e,t){return u.a.createElement(p.a,{key:t,value:e.id},e.firstName)})))},customFilterAndSearch:function(e,t){var a=n.handleChangeIdToName(t.patient);return(a=a.toLowerCase()).indexOf(e.toLowerCase())>-1},filtering:!1},{title:"Pharmacy*",field:"pharmacy",render:function(e){return u.a.createElement("div",null,e.pharmacy)},editComponent:function(e){return u.a.createElement(g.a,{id:"pharmacy",style:{marginBottom:8},placeholder:"pharmacy",value:n.state.pharmacy,InputProps:{readOnly:!0}})},filtering:!1},{title:"Family Doctor*",field:"doctor",render:function(e){return u.a.createElement("div",null,e.doctor)},editComponent:function(e){return u.a.createElement(g.a,{id:"doctor",style:{marginBottom:8},placeholder:"doctor",value:n.state.doctor,InputProps:{readOnly:!0}})},filtering:!1},{title:"Due Date*",field:"date",render:function(e){return u.a.createElement("div",null,n.formate_date(e.date))},editComponent:function(e){var t=Date.now();return console.log("now",t),u.a.createElement(g.a,{className:"full-width",id:"datetime-local",type:"date",defaultValue:t,InputLabelProps:{shrink:!0},value:n.state.date,onChange:n.handleChangeDate})},filtering:!1},{title:"Note",field:"note",render:function(e){return u.a.createElement("div",null,e.note)},editComponent:function(e){return u.a.createElement(g.a,{className:"full-width",id:"outlined-multiline-static",label:"Add Note",multiline:!0,rows:4,defaultValue:"Default Value",variant:"outlined",value:n.state.note,onChange:n.handleChangeNote})},filtering:!1},{title:"Delivered",field:"status",render:function(e){return u.a.createElement(v.a,{checked:n.state.checked[e.id],color:"primary",onChange:function(t){return n.handleChange(t.target.checked,e)}})},editComponent:function(e){return u.a.createElement(v.a,{checked:n.state.completed,color:"primary",onChange:function(t){return n.handleChangeCheckbox(t.target.checked,e)}})},lookup:{1:"YES",0:"NO"}}],pharmacy:"",patient:"",doctor:"",note:"",data:[],selectedMedications:[],medications:[],isEditMedications:!0,patients:[],completed:!1,checked:[]},n}return Object(c.a)(a,[{key:"handleChange",value:function(e,t){var a=this;console.log("v alue",e),C.a.editOrders({id:t.id,status:e}).then((function(n){n&&a.setState((function(a){var n=Object(r.a)(a.checked);return n[t.id]=e,Object(i.a)(Object(i.a)({},a),{},{checked:n})}))}))}},{key:"handleChangeCheckbox",value:function(e,t){this.setState({completed:e})}},{key:"formate_date",value:function(e){var t;e&&(t=(t=e.split(" ")[0].split("-"))[2]+"."+t[1]+"."+t[0]);return t}},{key:"handleChangeIdToName",value:function(e){var t=this.state.patients.filter((function(t){return t.id==e})),a="";return t.length&&(a=t[0].firstName+" "+t[0].lastName),a}},{key:"componentWillMount",value:function(){var e=this;this.defaultUrl="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSTbZrzTIuXAe01k5wgrhWGzPRPRliQygmBCA&usqp=CAU";var t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,this.user_id=t.id,console.log("res-1",this.user_id),C.a.showOrders({instance_id:this.instance_id,pagination:1}).then((function(t){var a,i=t.medications.map((function(e){return e.medicationName})),r=t.patients;console.log("res",t.orders);var o=[];t.orders.forEach((function(e){o[e.id]=e.status})),e.setState((a={medications:i},Object(n.a)(a,"medications",i),Object(n.a)(a,"data",t.orders),Object(n.a)(a,"patients",r),Object(n.a)(a,"checked",o),a))}))}},{key:"render",value:function(){var e=this,t=this.instance_id?{onRowAdd:function(t){return new Promise((function(a){a(),t.user_id=e.user_id,t.instance_id=e.instance_id,t.orderMedications=JSON.stringify(e.state.selectedMedications),t.patient=e.state.patient,t.date=e.state.date,t.note=e.state.note,t.pharmacy=e.state.pharmacy,t.doctor=e.state.doctor,t.status=e.state.completed,e.state.selectedMedications.length&&t.patient&&t.date&&t.pharmacy&&t.doctor?C.a.addOrders(t).then((function(t){console.log("res",t),e.setState((function(e){var a=Object(r.a)(e.data);a.push(t);return Object(i.a)(Object(i.a)({},e),{},{data:a,selectedMedications:[],isEditMedications:!0})}))})):alert("Bitte f\xfcllen Sie die erforderlichen Felder aus.")}))},onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),console.log(";oldData",t.id),C.a.deleteOrders({id:t.id}).then((function(a){console.log("res",a),e.setState((function(e){var a=Object(r.a)(e.data);return a.splice(a.indexOf(t),1),Object(i.a)(Object(i.a)({},e),{},{data:a})}))}))}),600)}))}}:{onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),console.log(";oldData",t.id),C.a.deleteOrders({id:t.id}).then((function(a){console.log("res",a),e.setState((function(e){var a=Object(r.a)(e.data);return a.splice(a.indexOf(t),1),Object(i.a)(Object(i.a)({},e),{},{data:a})}))}))}),600)}))}};return u.a.createElement("div",{className:"tables-wrapper search-table-wrap order-page"},u.a.createElement(y.f,{title:u.a.createElement(E.a,{id:"sidebar.order"}),center:!0}),u.a.createElement(b.a,{maxWidth:"lg"},u.a.createElement(O.a,{px:{xs:"12px",lg:0},className:"page-space"},u.a.createElement(h.a,{title:u.a.createElement(E.a,{id:"sidebar.order"}),columns:this.state.columns,data:this.state.data,options:{search:!0,filtering:!0},editable:t}))))}}]),a}(s.Component);t.default=N}}]);
//# sourceMappingURL=65.8528d0c5.chunk.js.map