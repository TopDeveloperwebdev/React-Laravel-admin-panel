(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[61],{2539:function(e,t,n){"use strict";n.r(t);var a=n(7),i=n(195),l=n(15),o=n(16),r=n(420),s=n(18),c=n(17),u=n(0),d=n.n(u),h=n(1551),m=n(61),p=n(1681),f=n.n(p),g=n(1647),b=n.n(g),y=n(1648),v=n.n(y),k=n(1587),E=n.n(k),C=n(11),D=n(30),S=n(236),T=n(1497),q=n(1500),x=n(408),N=n(407),w=n(768),_=n(789),j=n(1499),O=n(301),I=(n(326),n(762),n(1759)),z=n.n(I),A=["Jedes Jahr an Geburtstagen","Benutzer erzeugt eine Bestellung","Kommentar f\xfcr Bestellung","Neuer Patient"],B=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={open:!1,instance:null,userInstance_id:null,title:"",content:"",contentHeight:0,contentWidth:0,isEdit:!1,id:null,selectedType:"Jedes Jahr an Geburtstagen"},a.onInit=function(e){e.reset();null!==a.state.content.match(/(\<\w*)((\s\/\>)|(.*\<\/\w*\>))/i)?e.replace(a.state.content):e.insertText(a.state.content)},a}return Object(o.a)(n,[{key:"openDialog",value:function(){this.setState({open:!0})}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1})}},{key:"onSubmit",value:function(){var e=this.state.userInstance_id;if(console.log("this.state.title && this.state.content",this.state.title,this.state.content),this.state.title&&this.state.content){this.setState({open:!1});var t=this.state.content;this.props.onConfirm({title:this.state.title,instance_id:e,body:t,type:this.state.selectedType})}else alert("Bitte geben Sie die erforderlichen Felder ein")}},{key:"onUpdate",value:function(){var e=this.state.userInstance_id;if(this.state.title&&this.state.content){this.setState({open:!1});var t=this.state.content;this.props.onUpdate({id:this.state.id,title:this.state.title,type:this.state.selectedType,instance_id:e,body:t})}else alert("Bitte geben Sie die erforderlichen Felder ein")}},{key:"onChange",value:function(e){console.log("content",e),this.setState({content:e})}},{key:"typeChanged",value:function(e){this.setState({selectedType:e.target.value}),setTimeout((function(){Array.prototype.slice.call(document.querySelectorAll(".ql-placeholder .ql-picker-item")).forEach((function(e){return e.textContent=e.dataset.value})),document.querySelector(".ql-placeholder .ql-picker-label").innerHTML="Insert placeholder"}),10)}},{key:"titleChanged",value:function(e){this.setState({title:e.target.value})}},{key:"render",value:function(){var e=this;return console.log("this.state.instance",this.state.instance),d.a.createElement(T.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},d.a.createElement(q.a,{className:"p-10"},d.a.createElement(C.f,{title:d.a.createElement(D.a,{id:"sidebar.emailTemplates"}),center:!0}),d.a.createElement(m.a,{className:"box"},"Neuer Patient"==this.state.selectedType?d.a.createElement(x.a,{className:"full-width",id:"datetime-local",type:"text",label:"Please input Template Title",placeholder:"Neue Bestellung",InputLabelProps:{shrink:!0},value:this.state.title,onChange:this.titleChanged.bind(this),defaultValue:"Title..."}):d.a.createElement(x.a,{className:"full-width",id:"datetime-local",type:"text",label:"Please input Template Title",placeholder:"Neue Bestellung [oder_id]",InputLabelProps:{shrink:!0},value:this.state.title,onChange:this.titleChanged.bind(this),defaultValue:"Title..."}),d.a.createElement(N.a,{pt:5,className:"selection-wrap full-width"},d.a.createElement(w.a,{id:"page-size"},"Trigger Type"),d.a.createElement(_.a,{labelId:"page-size",id:"page-size",value:this.state.selectedType,onChange:this.typeChanged.bind(this),defaultValue:"Every year on birthdays",label:"Trigger Type"},A.map((function(e){return d.a.createElement("option",{key:e,value:e},e)}))))),d.a.createElement("div",{className:"text-editor"},"Jedes Jahr an Geburtstagen"==this.state.selectedType&&d.a.createElement(z.a,{theme:"snow",value:this.state.content,onChange:function(t){return e.onChange(t)},modules:n.modules1}),"Benutzer erzeugt eine Bestellung"==this.state.selectedType&&d.a.createElement(z.a,{theme:"snow",value:this.state.content,onChange:function(t){return e.onChange(t)},modules:n.modules2}),"Kommentar f\xfcr Bestellung"==this.state.selectedType&&d.a.createElement(z.a,{theme:"snow",value:this.state.content,onChange:function(t){return e.onChange(t)},modules:n.modules3}),"Neuer Patient"==this.state.selectedType&&d.a.createElement(z.a,{theme:"snow",value:this.state.content,onChange:function(t){return e.onChange(t)},modules:n.modules4}))),d.a.createElement(j.a,{className:"px-20 pb-20 justify-content-center"},d.a.createElement(m.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",p:1,textAlign:"center"},!this.state.isEdit&&d.a.createElement(m.a,{mx:2},d.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){return e.onSubmit(!0)}},"Submit")),this.state.isEdit&&d.a.createElement(m.a,{mx:2},d.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){return e.onUpdate(!0)}},"Update")),d.a.createElement(O.a,{variant:"contained",color:"secondary",onClick:function(){return e.onCloseDialog(!1)}},"No"))))}}]),n}(d.a.Component);B.modules1={toolbar:{container:[[{placeholder:["[Name]","[Birthday Date]","[Address]","[Phone]"]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],handlers:{placeholder:function(e){if(e){var t=this.quill.getSelection().index;this.quill.insertText(t,e),this.quill.setSelection(t+e.length)}}}}},B.modules2={toolbar:{container:[[{placeholder:["[patient firstname]","[patient lastname]","[patient birthday]","[patient insurance]","[patient address]","[patient phone]","[oder_id]","[order_duedate]","[order_public_link]"]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],handlers:{placeholder:function(e){if(e){var t=this.quill.getSelection().index;this.quill.insertText(t,e),this.quill.setSelection(t+e.length)}}}}},B.modules3={toolbar:{container:[[{placeholder:["[comment]","[patient]","[address]","[phone]","[insurance]","[insurance nr]","[birthday]","[family doctor]","[pharmacy]","[care manager]","[oder_id]","[order_public_link]"]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],handlers:{placeholder:function(e){if(e){var t=this.quill.getSelection().index;this.quill.insertText(t,e),this.quill.setSelection(t+e.length)}}}}},B.modules4={toolbar:{container:[[{placeholder:["[patient]","[patient notes]","[address]","[phone]","[insurance]","[insurance nr]","[birthday]","[family doctor]","[pharmacy]","[care manager anrede]","[care manager firstname]","[care manager lastname]","[care manager phone]","[care manager email]","[care manager]"]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],handlers:{placeholder:function(e){if(e){var t=this.quill.getSelection().index;this.quill.insertText(t,e),this.quill.setSelection(t+e.length)}}}}};var M=B,P=n(115),J=n(1636),L=n.n(J),H=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={open:!1,instance:null,title:"",content:"",name:"{{patient.name}}"},a}return Object(o.a)(n,[{key:"openDialog",value:function(){var e=this;this.setState({open:!0},(function(){setTimeout((function(){document.getElementsByClassName("patientname").innerText=e.state.name}),1)}))}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return d.a.createElement(T.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},d.a.createElement(q.a,{className:"p-10"},d.a.createElement(m.a,null,d.a.createElement(L.a,{className:"closeBtn",onClick:function(){return e.onCloseDialog(!1)}})),d.a.createElement(m.a,{className:"p-10"},d.a.createElement(P.a,{variant:"h4",className:"title"},this.props.document.title)),d.a.createElement(m.a,{className:"p-10"},d.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.document.content}})),d.a.createElement(m.a,{textAlign:"center",pt:2})))}}]),n}(d.a.Component),U=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={open:!1},e}return Object(o.a)(n,[{key:"openDialog",value:function(){this.setState({open:!0})}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1}),this.props.onConfirm(e)}},{key:"render",value:function(){var e=this;return d.a.createElement(T.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},d.a.createElement(q.a,null,d.a.createElement(m.a,{textAlign:"center",pt:2},d.a.createElement(P.a,{variant:"h5"},"Are you sure you want to delete this document permanently?"))),d.a.createElement(j.a,{className:"px-20 pb-20 justify-content-center"},d.a.createElement(m.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",p:1,textAlign:"center"},d.a.createElement(m.a,{mx:2},d.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){return e.onCloseDialog(!0)}},"Yes")),d.a.createElement(O.a,{variant:"contained",color:"secondary",onClick:function(){return e.onCloseDialog(!1)}},"No"))))}}]),n}(d.a.Component);window.patients={name:[],street:[],zip:[],city:[],insurance:[],insuranceNr:[],birthday:[],phone:[]};var F=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onCloseDialog=function(e){a.setState({oldData:null})},a.state={instances:[],templates:[],selectedDocument:{},oldData:{},columns:[{title:"Inhalt",field:"action",render:function(e){return d.a.createElement("div",null,d.a.createElement(f.a,{className:"pointerIcon",onClick:function(){return a.viewDocument(e.body,e.title)}}))}},{title:"Titel",field:"title"},{title:"Typ",field:"type"},{title:"Funktionen",field:"actions",render:function(e){return d.a.createElement("div",null,d.a.createElement(b.a,{className:"pointerIcon",onClick:function(){return a.editDocument(e)}}),d.a.createElement(v.a,{className:"pointerIcon",onClick:function(){return a.ondeleteContact(e)}}))}}]},a.editorDialog=d.a.createRef(),a.viewDialog=d.a.createRef(),a.deleteDialog=d.a.createRef(),a.addDocument=a.addDocument.bind(Object(r.a)(a)),a}return Object(o.a)(n,[{key:"addDocument",value:function(){this.editorDialog.current.setState({userInstance_id:this.instance_id}),this.editorDialog.current.openDialog(),setTimeout((function(){Array.prototype.slice.call(document.querySelectorAll(".ql-placeholder .ql-picker-item")).forEach((function(e){return e.textContent=e.dataset.value})),document.querySelector(".ql-placeholder .ql-picker-label").innerHTML="Insert placeholder"+document.querySelector(".ql-placeholder .ql-picker-label").innerHTML}),10)}},{key:"viewDocument",value:function(e,t){this.setState({selectedDocument:{content:e,title:t}}),this.viewDialog.current.openDialog()}},{key:"editDocument",value:function(e){this.editorDialog.current.setState({id:e.id,title:e.title,content:e.body,selectedType:e.type,isEdit:!0,userInstance_id:this.instance_id}),this.setState({oldData:e}),this.editorDialog.current.openDialog(),setTimeout((function(){Array.prototype.slice.call(document.querySelectorAll(".ql-placeholder .ql-picker-item")).forEach((function(e){return e.textContent=e.dataset.value})),document.querySelector(".ql-placeholder .ql-picker-label").innerHTML="Insert placeholder"+document.querySelector(".ql-placeholder .ql-picker-label").innerHTML}),10)}},{key:"onSubmit",value:function(e){e&&S.a.addMails(e).then((function(e){window.location.reload()}))}},{key:"onUpdate",value:function(e){e&&S.a.editMails(e).then((function(e){window.location.reload()}))}},{key:"ondeleteContact",value:function(e){console.log(";",e),this.setState({oldData:e}),this.deleteDialog.current.openDialog()}},{key:"deleteContactPermanent",value:function(e){var t=this;e&&S.a.deleteMails({id:this.state.oldData.id}).then((function(e){e&&t.setState((function(e){var n=Object(i.a)(e.templates);return n.splice(n.indexOf(t.state.oldData),1),Object(a.a)(Object(a.a)({},e),{},{templates:n})}))}))}},{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,S.a.showMails({instance_id:this.instance_id,pagination:1}).then((function(t){e.setState({templates:t})}))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"tables-wrapper"},d.a.createElement(C.f,{title:d.a.createElement(D.a,{id:"sidebar.emailTemplates"}),center:!0}),d.a.createElement(h.a,{maxWidth:"lg",className:"documentContainer"},d.a.createElement(m.a,{px:{xs:"12px",lg:0},className:"page-space"},d.a.createElement(E.a,{title:d.a.createElement(D.a,{id:"sidebar.emailTemplates"}),columns:this.state.columns,data:this.state.templates,localization:{header:{actions:"Funktionen"}},actions:this.instance_id?[{icon:"note_add_outlined",tooltip:"my tooltip",position:"toolbar",onClick:function(){e.addDocument()}}]:[]}))),d.a.createElement(M,{ref:this.editorDialog,instances:this.state.instances,onConfirm:function(t){return e.onSubmit(t)},onUpdate:function(t){return e.onUpdate(t)}}),d.a.createElement(H,{ref:this.viewDialog,document:this.state.selectedDocument}),d.a.createElement(U,{ref:this.deleteDialog,onConfirm:function(t){return e.deleteContactPermanent(t)}}))}}]),n}(u.Component);t.default=F}}]);
//# sourceMappingURL=61.a8d60294.chunk.js.map