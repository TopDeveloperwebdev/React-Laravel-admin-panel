(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[18],{1619:function(e,t,n){"use strict";var a=n(151);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),l=(0,a(n(417)).default)(i.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=l},1630:function(e,t,n){"use strict";var a=n(151);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),l=(0,a(n(417)).default)(i.default.createElement("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined");t.default=l},1631:function(e,t,n){"use strict";var a=n(151);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),l=(0,a(n(417)).default)(i.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4h-3.5z"}),"DeleteOutlineOutlined");t.default=l},1649:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(15),i=n(16),l=n(18),o=n(17),c=n(0),s=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getUrl",value:function(e){var t="/backend_latest/file_storage/"+e.split("/")[5];return console.log("url",t),console.log("url",t),t}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("instanceInfo"));return c.createElement("div",null,c.createElement("div",{style:{position:"absolute",top:"50px",left:"60px"},id:"header"},c.createElement("img",{src:this.getUrl(e.instanceLogo),style:{maxHeight:"60px"},height:"auto",width:"100px"})),c.createElement("div",{style:{position:"absolute",bottom:"30px",left:"60px",fontSize:"12px",color:"#b6b6b6",fontFamily:"Arial"},id:"footer"},c.createElement("div",{style:{fontFamily:"Arial"}},e.instanceName),"Mail:  ",e.email))}}]),n}(c.Component)},1650:function(e,t,n){"use strict";var a=n(151);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),l=(0,a(n(417)).default)(i.default.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"}),"InsertDriveFileOutlined");t.default=l},2419:function(e,t,n){"use strict";n.r(t);var a=n(7),i=n(194),l=n(15),o=n(16),c=n(424),s=n(18),r=n(17),u=n(0),d=n.n(u),p=n(1550),m=n(61),h=n(1650),f=n.n(h),v=n(1630),g=n.n(v),y=n(1631),b=n.n(y),E=n(1586),D=n.n(E),k=n(11),S=n(30),C=n(237),N=n(1495),O=n(1498),x=n(408),_=n(1497),j=n(228),w=(n(327),n(1678)),A=n.n(w),q=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={open:!1,instance:null,userInstance_id:null,title:"",content:"",contentHeight:0,contentWidth:0,isEdit:!1,id:null},a.onInit=function(e){e.reset();null!==a.state.content.match(/(\<\w*)((\s\/\>)|(.*\<\/\w*\>))/i)?e.replace(a.state.content):e.insertText(a.state.content)},a}return Object(o.a)(n,[{key:"openDialog",value:function(){this.setState({open:!0})}},{key:"closeDialog",value:function(){this.setState({open:!1,title:"",content:"",isEdit:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1,title:"",content:"",isEdit:!1})}},{key:"onSubmit",value:function(){var e=this.state.userInstance_id;if(this.state.userInstance_id||(e=this.state.instance),this.state.title&&e&&this.state.content){this.setState({open:!1});var t=this.state.content;t=(t=(t=(t=(t=(t=(t=(t=t.replaceAll("[name]","".concat("<span class='name'>[name]</span>"))).replaceAll("[street]","".concat("<span class='street'>[street]</span>"))).replaceAll("[zip]","".concat("<span class='zip'>[zip]</span>"))).replaceAll("[city]","".concat("<span class='city'>[city]</span>"))).replaceAll("[insurance]","".concat("<span class='insurance'>[insurance]</span>"))).replaceAll("[insuranceNr]","".concat("<span class='insuranceNr'>[insuranceNr]</span>"))).replaceAll("[birthday]","".concat("<span class='birthday'>[birthday]</span>"))).replaceAll("[phone]","".concat("<span class='phone'>[phone]</span>")),this.props.onConfirm({title:this.state.title,instance_id:e,content:t,contentHeight:this.state.contentHeight,contentWidth:this.state.contentWidth})}else alert("Bitte geben Sie die erforderlichen Felder ein")}},{key:"onUpdate",value:function(){var e=this.state.userInstance_id;if(this.state.userInstance_id||(e=this.state.instance),this.state.title&&e&&this.state.content){this.setState({open:!1});var t=this.state.content,n="<span class='name'>[name]</span>";t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\[name\]/gi,"".concat(n))).replace(/\[name\]/gi,"".concat(n))).replace(/\[street\]/gi,"".concat("<span class='street'>[street]</span>"))).replace(/\[zip\]/gi,"".concat("<span class='zip'>[zip]</span>"))).replace(/\[city\]/gi,"".concat("<span class='city'>city]</span>"))).replace(/\[insurance\]/gi,"".concat("<span class='insurance'>[insurance]</span>"))).replace(/\[insuranceNr\]/gi,"".concat("<span class='insuranceNr'>[insuranceNr]</span>"))).replace(/\[birthday\]/gi,"".concat("<span class='birthday'>[birthday]</span>"))).replace(/\[phone\]/gi,"".concat("<span class='phone'>[phone]</span>")),this.props.onUpdate({id:this.state.id,title:this.state.title,instance_id:e,content:t,contentHeight:this.state.contentHeight,contentWidth:this.state.contentWidth})}else alert("Bitte geben Sie die erforderlichen Felder ein")}},{key:"onChange",value:function(e){var t=document.getElementById("documentArea").clientHeight,n=document.getElementById("documentArea").clientWidth;this.setState({content:e,contentHeight:t,contentWidth:n})}},{key:"titleChanged",value:function(e){this.setState({title:e.target.value})}},{key:"render",value:function(){var e=this;return console.log("this.state.instance",this.state.instance),d.a.createElement(N.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},d.a.createElement(O.a,{className:"p-10"},d.a.createElement(k.f,{title:d.a.createElement(S.a,{id:"sidebar.document"}),center:!0}),d.a.createElement(m.a,{className:"box"},d.a.createElement(x.a,{className:"full-width",id:"datetime-local",type:"text",label:"Please input document title",InputLabelProps:{shrink:!0},value:this.state.title,onChange:this.titleChanged.bind(this),defaultValue:"Title..."})),d.a.createElement("div",{className:"text-editor",id:"documentArea"},d.a.createElement(A.a,{theme:"snow",value:this.state.content,onChange:function(t){return e.onChange(t)},modules:n.modules}))),d.a.createElement(_.a,{className:"px-20 pb-20 justify-content-center"},d.a.createElement(m.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",p:1,textAlign:"center"},!this.state.isEdit&&d.a.createElement(m.a,{mx:2},d.a.createElement(j.a,{variant:"contained",color:"primary",onClick:function(){return e.onSubmit(!0)}},"Submit")),this.state.isEdit&&d.a.createElement(m.a,{mx:2},d.a.createElement(j.a,{variant:"contained",color:"primary",onClick:function(){return e.onUpdate(!0)}},"Update")),d.a.createElement(j.a,{variant:"contained",color:"secondary",onClick:function(){return e.onCloseDialog(!1)}},"No"))))}}]),n}(d.a.Component);q.modules={toolbar:{container:[[{placeholder:["[name]","[street]","[zip]","[city]","[insurance]","[insuranceNr]","[birthday]","[phone]"]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],handlers:{placeholder:function(e){if(e){var t=this.quill.getSelection().index;this.quill.insertText(t,e),this.quill.setSelection(t+e.length)}}}}};var z=q,I=n(115),H=n(1619),M=n.n(H),L=n(33),T=n(1702),P=n(1649),U=(n(1625),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={open:!1,instance:null,title:"",content:"",name:"{{patient.name}}",Patient:""},a.onChangePatient=function(e){a.setState({Patient:e.target.value})},a}return Object(o.a)(n,[{key:"openDialog",value:function(){var e=this;this.setState({open:!0},(function(){setTimeout((function(){document.getElementsByClassName("patientname").innerText=e.state.name}),1)}))}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1})}},{key:"componentDidMount",value:function(){}},{key:"downloadDoc",value:function(){Object(T.a)(L.findDOMNode(document.getElementById("document")),{pageTemplate:P.a,paperSize:[794,1123],margin:{top:70,left:50,right:20,bottom:70}})}},{key:"render",value:function(){var e=this;return console.log("this.state.patients",this.state.patients),d.a.createElement(N.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog document"},d.a.createElement(O.a,{className:"p-10",id:"document"},d.a.createElement(m.a,null,d.a.createElement(M.a,{className:"closeBtn",onClick:function(){return e.onCloseDialog(!1)}})),d.a.createElement("div",{id:"document"},d.a.createElement(m.a,null," ",d.a.createElement("img",{className:"logo",src:this.props.document.instanceLogo,width:"50px"})),d.a.createElement(m.a,{className:"p-10"},d.a.createElement(I.a,{variant:"h4",className:"title"},this.props.document.title)),d.a.createElement(m.a,{className:"p-10"},d.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.document.content}})),d.a.createElement(m.a,{textAlign:"center",pt:2}),d.a.createElement(m.a,{className:"title-content",textAlign:"center"},d.a.createElement(m.a,{pt:1,fontSize:"body2.fontSize"},"instance Name : ",this.props.document.instanceName),d.a.createElement(m.a,{pt:1,fontSize:"body2.fontSize"},"Contact Email : ",this.props.document.email)))))}}]),n}(d.a.Component)),W=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={open:!1},e}return Object(o.a)(n,[{key:"openDialog",value:function(){this.setState({open:!0})}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1}),this.props.onConfirm(e)}},{key:"render",value:function(){var e=this;return d.a.createElement(N.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},d.a.createElement(O.a,null,d.a.createElement(m.a,{textAlign:"center",pt:2},d.a.createElement(I.a,{variant:"h5"},"Are you sure you want to delete this document permanently?"))),d.a.createElement(_.a,{className:"px-20 pb-20 justify-content-center"},d.a.createElement(m.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",p:1,textAlign:"center"},d.a.createElement(m.a,{mx:2},d.a.createElement(j.a,{variant:"contained",color:"primary",onClick:function(){return e.onCloseDialog(!0)}},"Yes")),d.a.createElement(j.a,{variant:"contained",color:"secondary",onClick:function(){return e.onCloseDialog(!1)}},"No"))))}}]),n}(d.a.Component),B=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onCloseDialog=function(e){a.setState({oldData:null})},a.state={instances:[],documents:[],selectedDocument:{},oldData:{},patients:[],columns:[{title:"Dokument",field:"action",render:function(e){return d.a.createElement("div",null,d.a.createElement(f.a,{className:"pointerIcon",onClick:function(){return a.viewDocument(e.content,e.email,e.instanceLogo,e.instanceName,e.title)}}))}},{title:"Titel",field:"title"},{title:"Erstellt am",field:"created_at",render:function(e){return d.a.createElement("div",null,a.formate_date(e.created_at))}},{title:"Funktionen",field:"actions",render:function(e){return d.a.createElement("div",null,d.a.createElement(g.a,{className:"pointerIcon",onClick:function(){return a.editDocument(e)}}),d.a.createElement(b.a,{className:"pointerIcon",onClick:function(){return a.ondeleteContact(e)}}))}}]},a.editorDialog=d.a.createRef(),a.viewDialog=d.a.createRef(),a.deleteDialog=d.a.createRef(),a.addDocument=a.addDocument.bind(Object(c.a)(a)),a}return Object(o.a)(n,[{key:"formate_date",value:function(e){var t="";if(e){var n=e.split(" "),a=n[0].split("-"),i=n[1].split(":");t="am "+a[2]+"."+a[1]+"."+a[0]+" um "+i[0]+":"+i[1]}return t}},{key:"addDocument",value:function(){this.editorDialog.current.setState({userInstance_id:this.instance_id}),this.editorDialog.current.openDialog(),setTimeout((function(){Array.prototype.slice.call(document.querySelectorAll(".ql-placeholder .ql-picker-item")).forEach((function(e){return e.textContent=e.dataset.value})),document.querySelector(".ql-placeholder .ql-picker-label").innerHTML="Insert placeholder"+document.querySelector(".ql-placeholder .ql-picker-label").innerHTML}),10)}},{key:"viewDocument",value:function(e,t,n,a,i){var l=[];this.state.patients.map((function(e){l.push(e.firstName)})),this.setState({selectedDocument:{content:e,instanceLogo:n,email:t,instanceName:a,title:i}}),this.viewDialog.current.setState({patients:l}),this.viewDialog.current.openDialog()}},{key:"editDocument",value:function(e){this.editorDialog.current.setState({id:e.id,instance:e.instance_id,title:e.title,content:e.content,isEdit:!0}),this.setState({oldData:e}),this.editorDialog.current.openDialog(),setTimeout((function(){Array.prototype.slice.call(document.querySelectorAll(".ql-placeholder .ql-picker-item")).forEach((function(e){return e.textContent=e.dataset.value})),document.querySelector(".ql-placeholder .ql-picker-label").innerHTML="Insert placeholder"+document.querySelector(".ql-placeholder .ql-picker-label").innerHTML}),10)}},{key:"onSubmit",value:function(e){e&&C.a.addDocuments(e).then((function(e){e.length&&window.location.reload()}))}},{key:"onUpdate",value:function(e){e&&C.a.editDocuments(e).then((function(e){e.length&&window.location.reload()}))}},{key:"ondeleteContact",value:function(e){console.log(";",e),this.setState({oldData:e}),this.deleteDialog.current.openDialog()}},{key:"deleteContactPermanent",value:function(e){var t=this;e&&C.a.deleteDocuments({id:this.state.oldData.id}).then((function(e){e&&t.setState((function(e){var n=Object(i.a)(e.documents);return n.splice(n.indexOf(t.state.oldData),1),Object(a.a)(Object(a.a)({},e),{},{documents:n})}))}))}},{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,console.log("this.instance_id-----------",this.instance_id),this.documents=this.props.match.params.id,C.a.showDocuments({instance_id:this.instance_id,pagination:1,folder_id:this.folder_id}).then((function(t){if("*"!=e.documents){var n=JSON.parse(e.documents);t.documents=t.documents.filter((function(e){return n.indexOf(e.id)>-1}))}console.log("patients",t.patients),e.setState({documents:t.documents,instances:t.instances,patients:t.patients})}))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"tables-wrapper"},d.a.createElement(k.f,{title:d.a.createElement(S.a,{id:"sidebar.documents"}),center:!0}),d.a.createElement(p.a,{maxWidth:"lg",className:"documentContainer"},d.a.createElement(m.a,{px:{xs:"12px",lg:0},className:"page-space"},d.a.createElement(D.a,{title:d.a.createElement(S.a,{id:"sidebar.documents"}),columns:this.state.columns,data:this.state.documents,actions:[{icon:"note_add_outlined",tooltip:"my tooltip",position:"toolbar",onClick:function(){e.addDocument()}}]}))),d.a.createElement(z,{ref:this.editorDialog,instances:this.state.instances,onConfirm:function(t){return e.onSubmit(t)},onUpdate:function(t){return e.onUpdate(t)}}),d.a.createElement(U,{ref:this.viewDialog,document:this.state.selectedDocument,patientList:this.state.patients}),d.a.createElement(W,{ref:this.deleteDialog,onConfirm:function(t){return e.deleteContactPermanent(t)}}))}}]),n}(u.Component);t.default=B}}]);
//# sourceMappingURL=18.1b159ceb.chunk.js.map