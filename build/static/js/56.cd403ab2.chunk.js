(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[56],{2390:function(e,t,n){"use strict";n.r(t);var a=n(7),i=n(194),o=n(15),c=n(16),s=n(428),l=n(18),r=n(17),u=n(0),d=n.n(u),m=n(1541),p=n(61),h=n(1661),f=n.n(h),g=n(1630),v=n.n(g),b=n(1631),E=n.n(b),y=n(1579),D=n.n(y),k=n(11),C=n(30),N=n(237),S=n(1486),O=n(1489),j=n(407),w=n(406),A=n(765),x=n(788),_=n(1488),I=n(228),z=n(2010),H=n.n(z),W=(n(1702),n(19)),B=n(323),T=n.n(B),U=function(e){var t=T.a.summernote.ui;return t.buttonGroup([t.button({className:"dropdown-toggle",contents:"<span>Insert Placeholders</span>",tooltip:"Insert",data:{toggle:"dropdown"}}),t.dropdown({className:"dropdown-style",contents:"<ol>\n\t\t\t\t\t\t\t<li>name</li>\n\t\t\t\t\t\t\t<li>street</li>\n\t\t\t\t\t\t\t<li>zip</li>\n\t\t\t\t\t\t\t<li>city</li>\n\t\t\t\t\t\t\t<li>insurance</li>\n\t\t\t\t\t\t\t<li>insuranceNr</li>\n\t\t\t\t\t\t\t<li>birthday</li>\n\t\t\t\t\t\t\t<li>phone</li>\n\t\t\t\t\t\t</ol>",callback:function(t){t.find("li").each((function(){T()(this).click((function(){var t=T()(this).text(),n=document.createElement("span");n.innerHTML="{{"+t+"}}",e.invoke("editor.insertNode",n)}))}))}})]).render()},L=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={open:!1,instance:null,userInstance_id:null,title:"",content:"",contentHeight:0,contentWidth:0,isEdit:!1,id:null},a.onInit=function(e){e.reset();null!==a.state.content.match(/(\<\w*)((\s\/\>)|(.*\<\/\w*\>))/i)?e.replace(a.state.content):e.insertText(a.state.content)},a}return Object(c.a)(n,[{key:"openDialog",value:function(){this.setState({open:!0})}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1})}},{key:"onSubmit",value:function(){var e=this.state.userInstance_id;if(this.state.userInstance_id||(e=this.state.instance),this.state.title&&e&&this.state.content){this.setState({open:!1});var t=this.state.content;t=(t=(t=(t=(t=(t=(t=(t=t.replaceAll(/{{name}}/g,"".concat("<span class='name'>{{name}}</span>"))).replaceAll(/{{street}}/g,"".concat("<span class='street'>{{street}}</span>"))).replaceAll(/{{zip}}/g,"".concat("<span class='zip'>{{zip}}</span>"))).replaceAll(/{{city}}/g,"".concat("<span class='city'>{{city}}</span>"))).replaceAll(/{{insurance}}/g,"".concat("<span class='insurance'>{{insurance}}</span>"))).replaceAll(/{{insuranceNr}}/g,"".concat("<span class='insuranceNr'>{{insuranceNr}}</span>"))).replaceAll(/{{birthday}}/g,"".concat("<span class='birthday'>{{birthday}}</span>"))).replaceAll(/{{phone}}/g,"".concat("<span class='phone'>{{phone}}</span>")),this.props.onConfirm({title:this.state.title,instance_id:e,content:t,contentHeight:this.state.contentHeight,contentWidth:this.state.contentWidth})}else alert("Bitte geben Sie die erforderlichen Felder ein")}},{key:"onUpdate",value:function(){var e=this.state.userInstance_id;if(this.state.userInstance_id||(e=this.state.instance),this.state.title&&e&&this.state.content){this.setState({open:!1});var t=this.state.content;t=(t=t.replaceAll(/{{/g,"".concat("<span class='patientName'>","{{"))).replaceAll(/}}/g,"}}".concat("</span>")),this.props.onUpdate({id:this.state.id,title:this.state.title,instance_id:e,content:t,contentHeight:this.state.contentHeight,contentWidth:this.state.contentWidth})}else alert("Bitte geben Sie die erforderlichen Felder ein")}},{key:"onChange",value:function(e){var t=document.getElementById("editArea").clientHeight,n=document.getElementById("editArea").clientWidth;this.setState({content:e,contentHeight:t,contentWidth:n})}},{key:"instanceChanged",value:function(e){this.setState({instance:e.target.value})}},{key:"titleChanged",value:function(e){this.setState({title:e.target.value})}},{key:"render",value:function(){var e=this;return console.log("this.state.instance",this.state.instance),d.a.createElement(S.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},d.a.createElement(O.a,{className:"p-10"},d.a.createElement(k.f,{title:d.a.createElement(C.a,{id:"sidebar.document"}),center:!0}),d.a.createElement(p.a,{className:"box"},d.a.createElement(j.a,{className:"full-width",id:"datetime-local",type:"text",label:"Please input document title",InputLabelProps:{shrink:!0},value:this.state.title,onChange:this.titleChanged.bind(this),defaultValue:"Title..."}),this.state.userInstance_id?"":d.a.createElement(p.a,null,this.props.instances.length?d.a.createElement(w.a,{className:"selection-wrap full-width"},d.a.createElement(A.a,{id:"page-size"},"Please Select a Instance"),d.a.createElement(x.a,{labelId:"page-size",id:"page-size",value:this.state.instance,onChange:this.instanceChanged.bind(this),defaultValue:1},this.props.instances.map((function(e){return d.a.createElement("option",{key:e.id,value:e.id},e.instanceName)})))):d.a.createElement("div",null,d.a.createElement(W.b,{to:"/app/instances"},"Add New Instances")))),d.a.createElement(p.a,{textAlign:"center",id:"editArea",pt:2},d.a.createElement(H.a,{onInit:this.onInit.bind(this),options:{height:350,dialogsInBody:!0,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["para",["ul","ol","paragraph"]],["color",["color"]],["view",["fullscreen","codeview"]],["mybutton",["Apotheken"]]],buttons:{Apotheken:U}},onChange:function(t){return e.onChange(t)}}))),d.a.createElement(_.a,{className:"px-20 pb-20 justify-content-center"},d.a.createElement(p.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",p:1,textAlign:"center"},!this.state.isEdit&&d.a.createElement(p.a,{mx:2},d.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){return e.onSubmit(!0)}},"Submit")),this.state.isEdit&&d.a.createElement(p.a,{mx:2},d.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){return e.onUpdate(!0)}},"Update")),d.a.createElement(I.a,{variant:"contained",color:"secondary",onClick:function(){return e.onCloseDialog(!1)}},"No"))))}}]),n}(d.a.Component),P=n(117),J=n(1615),M=n.n(J),F=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={open:!1,instance:null,title:"",content:"",name:"{{patient.name}}"},a}return Object(c.a)(n,[{key:"openDialog",value:function(){var e=this;this.setState({open:!0},(function(){setTimeout((function(){document.getElementsByClassName("patientname").innerText=e.state.name}),1)}))}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return d.a.createElement(S.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},d.a.createElement(O.a,{className:"p-10"},d.a.createElement(p.a,null,d.a.createElement(M.a,{className:"closeBtn",onClick:function(){return e.onCloseDialog(!1)}})),d.a.createElement(p.a,{bgcolor:"background.paper",className:"title-banner"},d.a.createElement(m.a,null,d.a.createElement(p.a,{className:"title-content",textAlign:"center"},d.a.createElement(P.a,{variant:"h4"},this.props.document.instanceName),d.a.createElement(p.a,{pt:1,fontSize:"body2.fontSize"},d.a.createElement("img",{src:this.props.document.instanceLogo}))))),d.a.createElement(p.a,{className:"p-10"},d.a.createElement(P.a,{variant:"h4",className:"title"},this.props.document.title)),d.a.createElement(p.a,{className:"p-10"},d.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.document.content}})),d.a.createElement(p.a,{textAlign:"center",pt:2}),d.a.createElement(p.a,{bgcolor:"background.paper",className:"title-banner"},d.a.createElement(m.a,null,d.a.createElement(p.a,{className:"title-content",textAlign:"center"},d.a.createElement(p.a,{pt:1,fontSize:"body2.fontSize"},"instance Name : ",this.props.document.instanceName),d.a.createElement(p.a,{pt:1,fontSize:"body2.fontSize"},"Contact Email : ",this.props.document.email))))))}}]),n}(d.a.Component),R=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={open:!1},e}return Object(c.a)(n,[{key:"openDialog",value:function(){this.setState({open:!0})}},{key:"closeDialog",value:function(){this.setState({open:!1})}},{key:"onCloseDialog",value:function(e){this.setState({open:!1}),this.props.onConfirm(e)}},{key:"render",value:function(){var e=this;return d.a.createElement(S.a,{open:this.state.open,onClose:this.closeDialog.bind(this),"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},d.a.createElement(O.a,null,d.a.createElement(p.a,{textAlign:"center",pt:2},d.a.createElement(P.a,{variant:"h5"},"Are you sure you want to delete this document permanently?"))),d.a.createElement(_.a,{className:"px-20 pb-20 justify-content-center"},d.a.createElement(p.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",p:1,textAlign:"center"},d.a.createElement(p.a,{mx:2},d.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){return e.onCloseDialog(!0)}},"Yes")),d.a.createElement(I.a,{variant:"contained",color:"secondary",onClick:function(){return e.onCloseDialog(!1)}},"No"))))}}]),n}(d.a.Component);window.patients={name:[],street:[],zip:[],city:[],insurance:[],insuranceNr:[],birthday:[],phone:[]};var V=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onCloseDialog=function(e){a.setState({oldData:null})},a.state={instances:[],documents:[],selectedDocument:{},oldData:{},columns:[{title:"Files",field:"action",render:function(e){return d.a.createElement("div",null,d.a.createElement(f.a,{className:"pointerIcon",onClick:function(){return a.viewDocument(e.content,e.email,e.instanceLogo,e.instanceName,e.title)}}))}},{title:"Title",field:"title"},{title:"Created_At",field:"created_at"},{title:"Actions",field:"actions",render:function(e){return d.a.createElement("div",null,d.a.createElement(v.a,{className:"pointerIcon",onClick:function(){return a.editDocument(e)}}),d.a.createElement(E.a,{className:"pointerIcon",onClick:function(){return a.ondeleteContact(e)}}))}}]},a.editorDialog=d.a.createRef(),a.viewDialog=d.a.createRef(),a.deleteDialog=d.a.createRef(),a.addDocument=a.addDocument.bind(Object(s.a)(a)),a}return Object(c.a)(n,[{key:"addDocument",value:function(){this.editorDialog.current.setState({userInstance_id:this.instance_id}),this.editorDialog.current.openDialog()}},{key:"viewDocument",value:function(e,t,n,a,i){this.setState({selectedDocument:{content:e,instanceLogo:n,email:t,instanceName:a,title:i}}),this.viewDialog.current.openDialog()}},{key:"editDocument",value:function(e){this.editorDialog.current.setState({id:e.id,instance:e.instance_id,title:e.title,content:e.content,isEdit:!0}),this.setState({oldData:e}),this.editorDialog.current.openDialog()}},{key:"onSubmit",value:function(e){var t=this;e&&N.a.addDocuments(e).then((function(e){e.length&&t.setState((function(t){var n=Object(i.a)(t.documents);return n.push(e[0]),Object(a.a)(Object(a.a)({},t),{},{documents:n})}))}))}},{key:"onUpdate",value:function(e){var t=this;e&&N.a.editDocuments(e).then((function(e){e.length&&t.setState((function(n){var o=Object(i.a)(n.documents);o[o.indexOf(t.state.oldData)]=e[0];return console.log("res documents",o),Object(a.a)(Object(a.a)({},n),{},{documents:o,oldData:{}})}))}))}},{key:"ondeleteContact",value:function(e){console.log(";",e),this.setState({oldData:e}),this.deleteDialog.current.openDialog()}},{key:"deleteContactPermanent",value:function(e){var t=this;e&&N.a.deleteDocuments({id:this.state.oldData.id}).then((function(e){e&&t.setState((function(e){var n=Object(i.a)(e.documents);return n.splice(n.indexOf(t.state.oldData),1),Object(a.a)(Object(a.a)({},e),{},{documents:n})}))}))}},{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,console.log("this.instance_id-----------",this.instance_id),this.documents=this.props.match.params.id,N.a.showDocuments({instance_id:this.instance_id,pagination:1,folder_id:this.folder_id}).then((function(t){if("*"!=e.documents){var n=JSON.parse(e.documents);t.documents=t.documents.filter((function(e){return n.indexOf(e.id)>-1}))}e.setState({documents:t.documents,instances:t.instances})}))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"tables-wrapper"},d.a.createElement(k.f,{title:d.a.createElement(C.a,{id:"sidebar.documents"}),center:!0}),d.a.createElement(m.a,{maxWidth:"lg",className:"documentContainer"},d.a.createElement(p.a,{px:{xs:"12px",lg:0},className:"page-space"},d.a.createElement(D.a,{title:d.a.createElement(C.a,{id:"sidebar.documents"}),columns:this.state.columns,data:this.state.documents,actions:[{icon:"note_add_outlined",tooltip:"my tooltip",position:"toolbar",onClick:function(){e.addDocument()}}]}))),d.a.createElement(L,{ref:this.editorDialog,instances:this.state.instances,onConfirm:function(t){return e.onSubmit(t)},onUpdate:function(t){return e.onUpdate(t)}}),d.a.createElement(F,{ref:this.viewDialog,document:this.state.selectedDocument}),d.a.createElement(R,{ref:this.deleteDialog,onConfirm:function(t){return e.deleteContactPermanent(t)}}))}}]),n}(u.Component);t.default=V}}]);
//# sourceMappingURL=56.cd403ab2.chunk.js.map