(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[8],{2487:function(e,t,a){"use strict";a.r(t);var n=a(195),o=a(7),r=a(15),i=a(16),s=a(18),c=a(17),l=a(0),d=a.n(l),u=a(1587),m=a.n(u),f=a(408),h=a(788),g=a(1551),p=a(61),b=a(1557),k=a(236),v=a(11),D=a(30),w=a(2541),E=a(38),C=a(112),j=a.n(C),O=a(1516),y=a(1756),S=a(457);j.a.updateLocale("en",{week:{dow:1}});var N={car1:"car1",car2:"car2",car3:"car3"},R={user1:"user1",user2:"user2",user3:"user3"},M={type1:"type1",type2:"type2",type3:"type3"},x=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onChangeReason=function(e,t){t&&n.setState({reason:t.reason,reasonData:t})},n.handleChangeDate=function(e){n.setState({date:e.target.value})},n.handleFromChange=function(e){var t=n.state.data.filter((function(t){return e<=new Date(t.date)&&new Date(t.date)<=n.state.to}));n.setState({from:e,selectedData:t})},n.handleToChange=function(e){var t=n.state.data.filter((function(t){return n.state.from<=new Date(t.date)&&new Date(t.date)<=e}));n.setState({to:e,selectedData:t})},n.state={columns:[{title:"Eingang(Datum)",field:"date",render:function(e){return d.a.createElement("div",null,n.formate_date(e.date))},editComponent:function(e){var t=Date.now();return console.log("now",t),d.a.createElement(f.a,{className:"full-width",id:"datetime-local",type:"date",placeholder:"tt.mm.jjjj",defaultValue:t,InputLabelProps:{shrink:!0},value:n.state.date,onChange:n.handleChangeDate})}},{title:"Rechungs-Nr.",field:"invoiceNr"},{title:"Grund",field:"reason",editComponent:function(e){if(e.rowData.id){var t=e.rowData.reason;if(n.state.isEditReason){var a=n.state.reasonList.find((function(e){return e.reason==t}));n.setState({isEditReason:!1,reason:t,reasonData:a})}}return d.a.createElement(w.a,{options:n.state.reasonList,getOptionLabel:function(e){return e.reason},value:n.state.reasonData,id:"auto-complete",autoComplete:!0,includeInputInList:!0,onChange:n.onChangeReason,renderInput:function(e){return d.a.createElement(f.a,Object.assign({id:"input-with-icon-textfield"},e,{margin:"normal",placeholder:"Familiendoktor"}))}})}},{title:"Type",field:"type",lookup:M},{title:"Mitarbeiter",field:"user",lookup:R},{title:"Auto",field:"car",lookup:N},{title:"Betrag",field:"amount",type:"numeric"},{title:"Link",field:"link",render:function(e){return d.a.createElement("div",{className:"linkdiv"},d.a.createElement("a",{href:e.link,target:"_blank"},e.link))}},{title:"Booked",field:"booked",render:function(e){return d.a.createElement(h.a,{checked:n.state.checked[e.id],color:"primary",onChange:function(t){return n.handleChange(t.target.checked,e)}})},editComponent:function(e){return d.a.createElement(h.a,{checked:n.state.completed,color:"primary",onChange:function(t){return n.handleChangeCheckbox(t.target.checked,e)}})}}],reasonList:[],reasonData:{},data:[],date:"",isEditReason:!1,completed:!1,checked:[],reason:"",from:new Date,to:new Date((new Date).getTime()+2592e6),selectedData:[]},n}return Object(i.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,console.log("res",this.instance_id),k.a.showAusgaben().then((function(t){e.setState((function(e){var a=t;return Object(o.a)(Object(o.a)({},e),{},{data:a})}));var a=[];t.forEach((function(e){a[e.id]=e.booked})),e.handleFromChange(e.state.from)}))}},{key:"handleChange",value:function(e,t){var a=this;console.log("v alue",e),k.a.editAusgaben({id:t.id,booked:e}).then((function(r){r&&a.setState((function(a){var r=Object(n.a)(a.checked);return r[t.id]=e,Object(o.a)(Object(o.a)({},a),{},{checked:r})}))}))}},{key:"formate_date",value:function(e){var t;e&&(t=(t=e.split(" ")[0].split("-"))[2]+"."+t[1]+"."+t[0]);return t}},{key:"handleChangeCheckbox",value:function(e,t){this.setState({completed:e})}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"tables-wrapper search-table-wrap ausgaben"},d.a.createElement(v.f,{title:d.a.createElement(D.a,{id:"sidebar.ausgaben"}),center:!0}),d.a.createElement(g.a,{maxWidth:"lg"},d.a.createElement(p.a,{px:{xs:"12px",lg:0},className:"page-space"},d.a.createElement(p.a,{pt:1,mb:3},d.a.createElement(b.a,{container:!0,sm:12,md:12,lg:12,className:"datecontainer"},d.a.createElement(O.a,{utils:S.a},d.a.createElement(b.a,{mr:3,item:!0,sm:4,md:4,lg:4,className:"justify-around"},d.a.createElement(y.b,{disableToolbar:!0,variant:"inline",label:"von",locale:"ru",format:"DD.MM.YYYY",margin:"normal",id:"date-picker-inline",value:this.state.from,name:"from",onChange:this.handleFromChange,KeyboardButtonProps:{"aria-label":"change date"}})),d.a.createElement(b.a,{ml:2,item:!0,sm:4,md:4,lg:4,className:"justify-around"},d.a.createElement(y.b,{disableToolbar:!0,label:"bis",variant:"inline",format:"DD.MM.YYYY",margin:"normal",name:"to",value:this.state.to,onChange:this.handleToChange,KeyboardButtonProps:{"aria-label":"change date"}}))))),d.a.createElement(m.a,{title:d.a.createElement(D.a,{id:"sidebar.ausgaben"}),columns:this.state.columns,data:this.state.selectedData,editable:{onRowAdd:function(t){return new Promise((function(a){setTimeout((function(){a(),console.log("newData",t),t.date=e.state.date,t.reason=e.state.reason,t.booked=e.state.completed,console.log("this.state",e.state.reason),k.a.addAusgaben(t).then((function(t){console.log("res",t),e.setState((function(e){var a=Object(n.a)(e.data);return a.push(t),Object(o.a)(Object(o.a)({},e),{},{data:a})})),E.NotificationManager.success("Die Daten werden erfolgreich gespeichert.")})).catch((function(e){E.NotificationManager.error(e.message)})),e.setState({isEditReason:!0})}),600)}))},onRowUpdate:function(t,a){return new Promise((function(r){setTimeout((function(){r(),t.date=e.state.date,t.reason=e.state.reason,t.booked=e.state.completed,k.a.editAusgaben(t).then((function(r){r&&e.setState((function(e){var r=Object(n.a)(e.data);return r[r.indexOf(a)]=t,Object(o.a)(Object(o.a)({},e),{},{data:r})})),e.setState({isEditReason:!0}),E.NotificationManager.success("Die Daten werden erfolgreich gespeichert.")})).catch((function(e){E.NotificationManager.error(e.message)}))}),600)}))},onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),k.a.deleteAusgaben({id:t.id}).then((function(a){e.setState((function(e){var a=Object(n.a)(e.data);return a.splice(a.indexOf(t),1),Object(o.a)(Object(o.a)({},e),{},{data:a})}))}))}),600)}))}}}))))}}]),a}(l.Component);t.default=x}}]);
//# sourceMappingURL=8.fe7e2ed2.chunk.js.map