(this.webpackJsonphulk=this.webpackJsonphulk||[]).push([[62],{2353:function(e,t,a){"use strict";a.r(t);var n=a(194),i=a(7),l=a(15),r=a(16),o=a(428),c=a(18),s=a(17),m=a(0),u=a.n(m),d=a(1579),p=a.n(d),f=a(1541),g=a(61),E=a(1486),h=a(1489),b=a(117),v=a(1561),O=a(1515),j=a(1519),w=a(1521),k=a(1517),N=a(1516),P=a(1488),y=a(228),x=a(237),D=a(11),C=a(30),S={},U=function(e){Object(c.a)(m,e);var t=Object(s.a)(m);function m(e){var a;return Object(l.a)(this,m),(a=t.call(this,e)).state={columns:[{title:"Medication name",field:"medicationName"},{title:"Ingredients ",field:"ingredients",lookup:S},{title:"Packaging ",field:"packaging"},{title:"Relation to order",field:"ordersCount",render:function(e){return u.a.createElement("a",{className:"pointer",onClick:function(){return a.openDialogue(e.medicationName,"users")}},e.ordersCount," ")},editComponent:function(e){return u.a.createElement("div",null,e.ordersCount)}},{title:"Relation to patient",field:"patientsCount",render:function(e){return u.a.createElement("a",{className:"pointer",onClick:function(){return a.openDialogue(e.medicationName,"patient")}},e.patientsCount," ")},editComponent:function(e){return u.a.createElement("div",null,e.patientsCount)}}],data:[],openPatient:!1,openUser:!1,relationPatients:[],relationUsers:[]},a.closePatientDialogue=a.closePatientDialogue.bind(Object(o.a)(a)),a.closeUserDialogue=a.closeUserDialogue.bind(Object(o.a)(a)),a}return Object(r.a)(m,[{key:"openDialogue",value:function(e,t){var a=this;x.a.relationPatients({medicationName:e,relation:t}).then((function(e){"patient"==t?(a.setState({relationPatients:e}),a.setState({openPatient:!0})):(a.setState({relationUsers:e}),a.setState({openUser:!0}))}))}},{key:"closePatientDialogue",value:function(){this.setState({openPatient:!1})}},{key:"closeUserDialogue",value:function(){this.setState({openUser:!1})}},{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.instance_id=t.instance_id,console.log("res",this.instance_id),x.a.showMedications({instance_id:this.instance_id,pagination:1}).then((function(t){console.log("ingredients",t.medications),e.setState((function(e){var a=t.medications;return Object(i.a)(Object(i.a)({},e),{},{data:a})})),t.ingredients.map((function(e){S[e.ingredients]=e.ingredients}))}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"tables-wrapper search-table-wrap"},u.a.createElement(D.f,{title:u.a.createElement(C.a,{id:"sidebar.medication"}),center:!0}),u.a.createElement(f.a,{maxWidth:"lg"},u.a.createElement(g.a,{px:{xs:"12px",lg:0},className:"page-space"},u.a.createElement(p.a,{title:u.a.createElement(C.a,{id:"sidebar.medication"}),columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a){setTimeout((function(){a(),console.log("newData",t),t.instance_id=e.instance_id,x.a.addMedications(t).then((function(t){console.log("res",t),e.setState((function(e){var a=Object(n.a)(e.data);return a.push(t),console.log("ingredients-res",a),Object(i.a)(Object(i.a)({},e),{},{data:a})}))}))}),600)}))},onRowUpdate:function(t,a){return new Promise((function(l){setTimeout((function(){l(),console.log("newdata",t.id),x.a.editMedications(t).then((function(l){a&&e.setState((function(e){var l=Object(n.a)(e.data);return l[l.indexOf(a)]=t,Object(i.a)(Object(i.a)({},e),{},{data:l})}))}))}),600)}))},onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),console.log(";oldData",t.id),x.a.deleteMedications({id:t.id}).then((function(a){console.log("res",a),e.setState((function(e){var a=Object(n.a)(e.data);return a.splice(a.indexOf(t),1),Object(i.a)(Object(i.a)({},e),{},{data:a})}))}))}),600)}))}}}))),u.a.createElement(E.a,{open:this.state.openPatient,"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},u.a.createElement(h.a,null,u.a.createElement(g.a,{textAlign:"center",pt:2},u.a.createElement(b.a,{variant:"h5"},"Here is a list of patients using this meidcation."),u.a.createElement(g.a,null,u.a.createElement(v.a,null,u.a.createElement(O.a,{"aria-label":"simple table"},u.a.createElement(j.a,null,u.a.createElement(w.a,null,u.a.createElement(k.a,null,"ID"),u.a.createElement(k.a,{align:"left"},"Avatar"),u.a.createElement(k.a,{align:"left"},"Name"),u.a.createElement(k.a,{align:"left"},"Phone1"),u.a.createElement(k.a,{align:"left"},"Phone2"))),u.a.createElement(N.a,null,this.state.relationPatients.map((function(e){return u.a.createElement(w.a,{key:e.id},u.a.createElement(k.a,{component:"th",scope:"row"},e.id),u.a.createElement(k.a,{align:"left",className:"user-logo"},u.a.createElement("img",{src:e.picture?e.picture:a(727),alt:"search",width:"45",height:"45"})),u.a.createElement(k.a,{align:"left"},e.firstName," ",e.lastName),u.a.createElement(k.a,{align:"left"},e.phone1),u.a.createElement(k.a,{align:"left"},e.phone2))})))))))),u.a.createElement(P.a,{className:"px-20 pb-20 justify-content-center"},u.a.createElement(g.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",p:1,textAlign:"center"},u.a.createElement(g.a,{mx:2},u.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.closePatientDialogue},"OK"))))),u.a.createElement(E.a,{open:this.state.openUser,"aria-labelledby":"responsive-dialog-title",className:"confirmation-dialog"},u.a.createElement(h.a,null,u.a.createElement(g.a,{textAlign:"center",pt:2},u.a.createElement(b.a,{variant:"h5"},"Here is a list of users who order this meidcation."),u.a.createElement(g.a,null,u.a.createElement(v.a,null,u.a.createElement(O.a,{"aria-label":"simple table"},u.a.createElement(j.a,null,u.a.createElement(w.a,null,u.a.createElement(k.a,null,"ID"),u.a.createElement(k.a,{align:"left"},"Name"),u.a.createElement(k.a,{align:"left"},"E-mail"),u.a.createElement(k.a,{align:"left"},"Instance"))),u.a.createElement(N.a,null,this.state.relationUsers.map((function(e){return u.a.createElement(w.a,{key:e.id},u.a.createElement(k.a,{component:"th",scope:"row"},e.id),u.a.createElement(k.a,{align:"left"},e.name),u.a.createElement(k.a,{align:"left"},e.email),u.a.createElement(k.a,{align:"left"},e.instance_id))})))))))),u.a.createElement(P.a,{className:"px-20 pb-20 justify-content-center"},u.a.createElement(g.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",p:1,textAlign:"center"},u.a.createElement(g.a,{mx:2},u.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.closeUserDialogue},"OK"))))))}}]),m}(m.Component);t.default=U}}]);
//# sourceMappingURL=62.e23c1181.chunk.js.map